var hl=Object.create;var Bt=Object.defineProperty,ml=Object.defineProperties,pl=Object.getOwnPropertyDescriptor,bl=Object.getOwnPropertyDescriptors,yl=Object.getOwnPropertyNames,bi=Object.getOwnPropertySymbols,gl=Object.getPrototypeOf,gi=Object.prototype.hasOwnProperty,Sl=Object.prototype.propertyIsEnumerable;var yi=(n,r,o)=>r in n?Bt(n,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[r]=o,M=(n,r)=>{for(var o in r||(r={}))gi.call(r,o)&&yi(n,o,r[o]);if(bi)for(var o of bi(r))Sl.call(r,o)&&yi(n,o,r[o]);return n},Se=(n,r)=>ml(n,bl(r)),Si=n=>Bt(n,"__esModule",{value:!0});var kt=(n,r)=>()=>(n&&(r=n(n=0)),r);var A=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),_i=(n,r)=>{for(var o in r)Bt(n,o,{get:r[o],enumerable:!0})},wi=(n,r,o,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of yl(r))!gi.call(n,s)&&(o||s!=="default")&&Bt(n,s,{get:()=>r[s],enumerable:!(a=pl(r,s))||a.enumerable});return n},ce=(n,r)=>wi(Si(Bt(n!=null?hl(gl(n)):{},"default",!r&&n&&n.__esModule?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n),_l=(n=>(r,o)=>n&&n.get(r)||(o=wi(Si({}),r,1),n&&n.set(r,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var Pi=A((jf,Ci)=>{Ci.exports=Ei;Ei.sync=Rl;var Ri=require("fs");function wl(n,r){var o=r.pathExt!==void 0?r.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var a=0;a<o.length;a++){var s=o[a].toLowerCase();if(s&&n.substr(-s.length).toLowerCase()===s)return!0}return!1}function Ti(n,r,o){return!n.isSymbolicLink()&&!n.isFile()?!1:wl(r,o)}function Ei(n,r,o){Ri.stat(n,function(a,s){o(a,a?!1:Ti(s,n,r))})}function Rl(n,r){return Ti(Ri.statSync(n),n,r)}});var Oi=A((Nf,ki)=>{ki.exports=vi;vi.sync=Tl;var Ai=require("fs");function vi(n,r,o){Ai.stat(n,function(a,s){o(a,a?!1:Bi(s,r))})}function Tl(n,r){return Bi(Ai.statSync(n),r)}function Bi(n,r){return n.isFile()&&El(n,r)}function El(n,r){var o=n.mode,a=n.uid,s=n.gid,l=r.uid!==void 0?r.uid:process.getuid&&process.getuid(),f=r.gid!==void 0?r.gid:process.getgid&&process.getgid(),m=parseInt("100",8),b=parseInt("010",8),p=parseInt("001",8),R=m|b,T=o&p||o&b&&s===f||o&m&&a===l||o&R&&l===0;return T}});var xi=A((Hf,Ii)=>{var Uf=require("fs"),wr;process.platform==="win32"||global.TESTING_WINDOWS?wr=Pi():wr=Oi();Ii.exports=Rn;Rn.sync=Cl;function Rn(n,r,o){if(typeof r=="function"&&(o=r,r={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(a,s){Rn(n,r||{},function(l,f){l?s(l):a(f)})})}wr(n,r||{},function(a,s){a&&(a.code==="EACCES"||r&&r.ignoreErrors)&&(a=null,s=!1),o(a,s)})}function Cl(n,r){try{return wr.sync(n,r||{})}catch(o){if(r&&r.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var $i=A((Gf,zi)=>{var nt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",qi=require("path"),Pl=nt?";":":",Wi=xi(),Di=n=>Object.assign(new Error(`not found: ${n}`),{code:"ENOENT"}),Fi=(n,r)=>{let o=r.colon||Pl,a=n.match(/\//)||nt&&n.match(/\\/)?[""]:[...nt?[process.cwd()]:[],...(r.path||process.env.PATH||"").split(o)],s=nt?r.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",l=nt?s.split(o):[""];return nt&&n.indexOf(".")!==-1&&l[0]!==""&&l.unshift(""),{pathEnv:a,pathExt:l,pathExtExe:s}},Li=(n,r,o)=>{typeof r=="function"&&(o=r,r={}),r||(r={});let{pathEnv:a,pathExt:s,pathExtExe:l}=Fi(n,r),f=[],m=p=>new Promise((R,T)=>{if(p===a.length)return r.all&&f.length?R(f):T(Di(n));let S=a[p],g=/^".*"$/.test(S)?S.slice(1,-1):S,y=qi.join(g,n),C=!g&&/^\.[\\\/]/.test(n)?n.slice(0,2)+y:y;R(b(C,p,0))}),b=(p,R,T)=>new Promise((S,g)=>{if(T===s.length)return S(m(R+1));let y=s[T];Wi(p+y,{pathExt:l},(C,P)=>{if(!C&&P)if(r.all)f.push(p+y);else return S(p+y);return S(b(p,R,T+1))})});return o?m(0).then(p=>o(null,p),o):m(0)},Al=(n,r)=>{r=r||{};let{pathEnv:o,pathExt:a,pathExtExe:s}=Fi(n,r),l=[];for(let f=0;f<o.length;f++){let m=o[f],b=/^".*"$/.test(m)?m.slice(1,-1):m,p=qi.join(b,n),R=!b&&/^\.[\\\/]/.test(n)?n.slice(0,2)+p:p;for(let T=0;T<a.length;T++){let S=R+a[T];try{if(Wi.sync(S,{pathExt:s}))if(r.all)l.push(S);else return S}catch{}}}if(r.all&&l.length)return l;if(r.nothrow)return null;throw Di(n)};zi.exports=Li;Li.sync=Al});var En=A((Vf,Tn)=>{"use strict";var Mi=(n={})=>{let r=n.env||process.env;return(n.platform||process.platform)!=="win32"?"PATH":Object.keys(r).reverse().find(a=>a.toUpperCase()==="PATH")||"Path"};Tn.exports=Mi;Tn.exports.default=Mi});var Hi=A((Yf,Ui)=>{"use strict";var ji=require("path"),vl=$i(),Bl=En();function Ni(n,r){let o=n.options.env||process.env,a=process.cwd(),s=n.options.cwd!=null,l=s&&process.chdir!==void 0&&!process.chdir.disabled;if(l)try{process.chdir(n.options.cwd)}catch{}let f;try{f=vl.sync(n.command,{path:o[Bl({env:o})],pathExt:r?ji.delimiter:void 0})}catch{}finally{l&&process.chdir(a)}return f&&(f=ji.resolve(s?n.options.cwd:"",f)),f}function kl(n){return Ni(n)||Ni(n,!0)}Ui.exports=kl});var Gi=A((Qf,Pn)=>{"use strict";var Cn=/([()\][%!^"`<>&|;, *?])/g;function Ol(n){return n=n.replace(Cn,"^$1"),n}function Il(n,r){return n=`${n}`,n=n.replace(/(\\*)"/g,'$1$1\\"'),n=n.replace(/(\\*)$/,"$1$1"),n=`"${n}"`,n=n.replace(Cn,"^$1"),r&&(n=n.replace(Cn,"^$1")),n}Pn.exports.command=Ol;Pn.exports.argument=Il});var Yi=A((Xf,Vi)=>{"use strict";Vi.exports=/^#!(.*)/});var Xi=A((Kf,Qi)=>{"use strict";var xl=Yi();Qi.exports=(n="")=>{let r=n.match(xl);if(!r)return null;let[o,a]=r[0].replace(/#! ?/,"").split(" "),s=o.split("/").pop();return s==="env"?a:a?`${s} ${a}`:s}});var Zi=A((Zf,Ki)=>{"use strict";var An=require("fs"),ql=Xi();function Wl(n){let o=Buffer.alloc(150),a;try{a=An.openSync(n,"r"),An.readSync(a,o,0,150,0),An.closeSync(a)}catch{}return ql(o.toString())}Ki.exports=Wl});var ra=A((Jf,ta)=>{"use strict";var Dl=require("path"),Ji=Hi(),ea=Gi(),Fl=Zi(),Ll=process.platform==="win32",zl=/\.(?:com|exe)$/i,$l=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Ml(n){n.file=Ji(n);let r=n.file&&Fl(n.file);return r?(n.args.unshift(n.file),n.command=r,Ji(n)):n.file}function jl(n){if(!Ll)return n;let r=Ml(n),o=!zl.test(r);if(n.options.forceShell||o){let a=$l.test(r);n.command=Dl.normalize(n.command),n.command=ea.command(n.command),n.args=n.args.map(l=>ea.argument(l,a));let s=[n.command].concat(n.args).join(" ");n.args=["/d","/s","/c",`"${s}"`],n.command=process.env.comspec||"cmd.exe",n.options.windowsVerbatimArguments=!0}return n}function Nl(n,r,o){r&&!Array.isArray(r)&&(o=r,r=null),r=r?r.slice(0):[],o=Object.assign({},o);let a={command:n,args:r,options:o,file:void 0,original:{command:n,args:r}};return o.shell?a:jl(a)}ta.exports=Nl});var ia=A((ed,oa)=>{"use strict";var vn=process.platform==="win32";function Bn(n,r){return Object.assign(new Error(`${r} ${n.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${r} ${n.command}`,path:n.command,spawnargs:n.args})}function Ul(n,r){if(!vn)return;let o=n.emit;n.emit=function(a,s){if(a==="exit"){let l=na(s,r,"spawn");if(l)return o.call(n,"error",l)}return o.apply(n,arguments)}}function na(n,r){return vn&&n===1&&!r.file?Bn(r.original,"spawn"):null}function Hl(n,r){return vn&&n===1&&!r.file?Bn(r.original,"spawnSync"):null}oa.exports={hookChildProcess:Ul,verifyENOENT:na,verifyENOENTSync:Hl,notFoundError:Bn}});var ua=A((td,ot)=>{"use strict";var aa=require("child_process"),kn=ra(),On=ia();function sa(n,r,o){let a=kn(n,r,o),s=aa.spawn(a.command,a.args,a.options);return On.hookChildProcess(s,a),s}function Gl(n,r,o){let a=kn(n,r,o),s=aa.spawnSync(a.command,a.args,a.options);return s.error=s.error||On.verifyENOENTSync(s.status,a),s}ot.exports=sa;ot.exports.spawn=sa;ot.exports.sync=Gl;ot.exports._parse=kn;ot.exports._enoent=On});var ca=A((rd,la)=>{"use strict";la.exports=n=>{let r=typeof n=="string"?`
`:`
`.charCodeAt(),o=typeof n=="string"?"\r":"\r".charCodeAt();return n[n.length-1]===r&&(n=n.slice(0,n.length-1)),n[n.length-1]===o&&(n=n.slice(0,n.length-1)),n}});var ha=A((nd,It)=>{"use strict";var Ot=require("path"),fa=En(),da=n=>{n=M({cwd:process.cwd(),path:process.env[fa()],execPath:process.execPath},n);let r,o=Ot.resolve(n.cwd),a=[];for(;r!==o;)a.push(Ot.join(o,"node_modules/.bin")),r=o,o=Ot.resolve(o,"..");let s=Ot.resolve(n.cwd,n.execPath,"..");return a.push(s),a.concat(n.path).join(Ot.delimiter)};It.exports=da;It.exports.default=da;It.exports.env=n=>{n=M({env:process.env},n);let r=M({},n.env),o=fa({env:r});return n.path=r[o],r[o]=It.exports(n),r}});var pa=A((od,In)=>{"use strict";var ma=(n,r)=>{for(let o of Reflect.ownKeys(r))Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o));return n};In.exports=ma;In.exports.default=ma});var ya=A((id,Tr)=>{"use strict";var Vl=pa(),Rr=new WeakMap,ba=(n,r={})=>{if(typeof n!="function")throw new TypeError("Expected a function");let o,a=0,s=n.displayName||n.name||"<anonymous>",l=function(...f){if(Rr.set(l,++a),a===1)o=n.apply(this,f),n=null;else if(r.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return o};return Vl(l,n),Rr.set(l,a),l};Tr.exports=ba;Tr.exports.default=ba;Tr.exports.callCount=n=>{if(!Rr.has(n))throw new Error(`The given function \`${n.name}\` is not wrapped by the \`onetime\` package`);return Rr.get(n)}});var ga=A(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.SIGNALS=void 0;var Yl=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Er.SIGNALS=Yl});var xn=A(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.SIGRTMAX=it.getRealtimeSignals=void 0;var Ql=function(){let n=_a-Sa+1;return Array.from({length:n},Xl)};it.getRealtimeSignals=Ql;var Xl=function(n,r){return{name:`SIGRT${r+1}`,number:Sa+r,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Sa=34,_a=64;it.SIGRTMAX=_a});var wa=A(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.getSignals=void 0;var Kl=require("os"),Zl=ga(),Jl=xn(),ec=function(){let n=(0,Jl.getRealtimeSignals)();return[...Zl.SIGNALS,...n].map(tc)};Cr.getSignals=ec;var tc=function({name:n,number:r,description:o,action:a,forced:s=!1,standard:l}){let{signals:{[n]:f}}=Kl.constants,m=f!==void 0;return{name:n,number:m?f:r,description:o,supported:m,action:a,forced:s,standard:l}}});var Ta=A(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.signalsByNumber=at.signalsByName=void 0;var rc=require("os"),Ra=wa(),nc=xn(),oc=function(){return(0,Ra.getSignals)().reduce(ic,{})},ic=function(n,{name:r,number:o,description:a,supported:s,action:l,forced:f,standard:m}){return Se(M({},n),{[r]:{name:r,number:o,description:a,supported:s,action:l,forced:f,standard:m}})},ac=oc();at.signalsByName=ac;var sc=function(){let n=(0,Ra.getSignals)(),r=nc.SIGRTMAX+1,o=Array.from({length:r},(a,s)=>uc(s,n));return Object.assign({},...o)},uc=function(n,r){let o=lc(n,r);if(o===void 0)return{};let{name:a,description:s,supported:l,action:f,forced:m,standard:b}=o;return{[n]:{name:a,number:n,description:s,supported:l,action:f,forced:m,standard:b}}},lc=function(n,r){let o=r.find(({name:a})=>rc.constants.signals[a]===n);return o!==void 0?o:r.find(a=>a.number===n)},cc=sc();at.signalsByNumber=cc});var Ca=A((cd,Ea)=>{"use strict";var{signalsByName:fc}=Ta(),dc=({timedOut:n,timeout:r,errorCode:o,signal:a,signalDescription:s,exitCode:l,isCanceled:f})=>n?`timed out after ${r} milliseconds`:f?"was canceled":o!==void 0?`failed with ${o}`:a!==void 0?`was killed with ${a} (${s})`:l!==void 0?`failed with exit code ${l}`:"failed",hc=({stdout:n,stderr:r,all:o,error:a,signal:s,exitCode:l,command:f,escapedCommand:m,timedOut:b,isCanceled:p,killed:R,parsed:{options:{timeout:T}}})=>{l=l===null?void 0:l,s=s===null?void 0:s;let S=s===void 0?void 0:fc[s].description,g=a&&a.code,C=`Command ${dc({timedOut:b,timeout:T,errorCode:g,signal:s,signalDescription:S,exitCode:l,isCanceled:p})}: ${f}`,P=Object.prototype.toString.call(a)==="[object Error]",v=P?`${C}
${a.message}`:C,W=[v,r,n].filter(Boolean).join(`
`);return P?(a.originalMessage=a.message,a.message=W):a=new Error(W),a.shortMessage=v,a.command=f,a.escapedCommand=m,a.exitCode=l,a.signal=s,a.signalDescription=S,a.stdout=n,a.stderr=r,o!==void 0&&(a.all=o),"bufferedData"in a&&delete a.bufferedData,a.failed=!0,a.timedOut=Boolean(b),a.isCanceled=p,a.killed=R&&!b,a};Ea.exports=hc});var Aa=A((fd,qn)=>{"use strict";var Pr=["stdin","stdout","stderr"],mc=n=>Pr.some(r=>n[r]!==void 0),Pa=n=>{if(!n)return;let{stdio:r}=n;if(r===void 0)return Pr.map(a=>n[a]);if(mc(n))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Pr.map(a=>`\`${a}\``).join(", ")}`);if(typeof r=="string")return r;if(!Array.isArray(r))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof r}\``);let o=Math.max(r.length,Pr.length);return Array.from({length:o},(a,s)=>r[s])};qn.exports=Pa;qn.exports.node=n=>{let r=Pa(n);return r==="ipc"?"ipc":r===void 0||typeof r=="string"?[r,r,r,"ipc"]:r.includes("ipc")?r:[...r,"ipc"]}});var va=A((dd,Ar)=>{Ar.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Ar.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Ar.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var xa=A((hd,lt)=>{var L=global.process,ze=function(n){return n&&typeof n=="object"&&typeof n.removeListener=="function"&&typeof n.emit=="function"&&typeof n.reallyExit=="function"&&typeof n.listeners=="function"&&typeof n.kill=="function"&&typeof n.pid=="number"&&typeof n.on=="function"};ze(L)?(Ba=require("assert"),st=va(),ka=/^win/i.test(L.platform),xt=require("events"),typeof xt!="function"&&(xt=xt.EventEmitter),L.__signal_exit_emitter__?j=L.__signal_exit_emitter__:(j=L.__signal_exit_emitter__=new xt,j.count=0,j.emitted={}),j.infinite||(j.setMaxListeners(1/0),j.infinite=!0),lt.exports=function(n,r){if(!ze(global.process))return function(){};Ba.equal(typeof n,"function","a callback must be provided for exit handler"),ut===!1&&Wn();var o="exit";r&&r.alwaysLast&&(o="afterexit");var a=function(){j.removeListener(o,n),j.listeners("exit").length===0&&j.listeners("afterexit").length===0&&vr()};return j.on(o,n),a},vr=function(){!ut||!ze(global.process)||(ut=!1,st.forEach(function(r){try{L.removeListener(r,Br[r])}catch{}}),L.emit=kr,L.reallyExit=Dn,j.count-=1)},lt.exports.unload=vr,$e=function(r,o,a){j.emitted[r]||(j.emitted[r]=!0,j.emit(r,o,a))},Br={},st.forEach(function(n){Br[n]=function(){if(!!ze(global.process)){var o=L.listeners(n);o.length===j.count&&(vr(),$e("exit",null,n),$e("afterexit",null,n),ka&&n==="SIGHUP"&&(n="SIGINT"),L.kill(L.pid,n))}}}),lt.exports.signals=function(){return st},ut=!1,Wn=function(){ut||!ze(global.process)||(ut=!0,j.count+=1,st=st.filter(function(r){try{return L.on(r,Br[r]),!0}catch{return!1}}),L.emit=Ia,L.reallyExit=Oa)},lt.exports.load=Wn,Dn=L.reallyExit,Oa=function(r){!ze(global.process)||(L.exitCode=r||0,$e("exit",L.exitCode,null),$e("afterexit",L.exitCode,null),Dn.call(L,L.exitCode))},kr=L.emit,Ia=function(r,o){if(r==="exit"&&ze(global.process)){o!==void 0&&(L.exitCode=o);var a=kr.apply(this,arguments);return $e("exit",L.exitCode,null),$e("afterexit",L.exitCode,null),a}else return kr.apply(this,arguments)}):lt.exports=function(){return function(){}};var Ba,st,ka,xt,j,vr,$e,Br,ut,Wn,Dn,Oa,kr,Ia});var Wa=A((md,qa)=>{"use strict";var pc=require("os"),bc=xa(),yc=1e3*5,gc=(n,r="SIGTERM",o={})=>{let a=n(r);return Sc(n,r,o,a),a},Sc=(n,r,o,a)=>{if(!_c(r,o,a))return;let s=Rc(o),l=setTimeout(()=>{n("SIGKILL")},s);l.unref&&l.unref()},_c=(n,{forceKillAfterTimeout:r},o)=>wc(n)&&r!==!1&&o,wc=n=>n===pc.constants.signals.SIGTERM||typeof n=="string"&&n.toUpperCase()==="SIGTERM",Rc=({forceKillAfterTimeout:n=!0})=>{if(n===!0)return yc;if(!Number.isFinite(n)||n<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${n}\` (${typeof n})`);return n},Tc=(n,r)=>{n.kill()&&(r.isCanceled=!0)},Ec=(n,r,o)=>{n.kill(r),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:r}))},Cc=(n,{timeout:r,killSignal:o="SIGTERM"},a)=>{if(r===0||r===void 0)return a;let s,l=new Promise((m,b)=>{s=setTimeout(()=>{Ec(n,o,b)},r)}),f=a.finally(()=>{clearTimeout(s)});return Promise.race([l,f])},Pc=({timeout:n})=>{if(n!==void 0&&(!Number.isFinite(n)||n<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${n}\` (${typeof n})`)},Ac=async(n,{cleanup:r,detached:o},a)=>{if(!r||o)return a;let s=bc(()=>{n.kill()});return a.finally(()=>{s()})};qa.exports={spawnedKill:gc,spawnedCancel:Tc,setupTimeout:Cc,validateTimeout:Pc,setExitHandler:Ac}});var Fa=A((pd,Da)=>{"use strict";var fe=n=>n!==null&&typeof n=="object"&&typeof n.pipe=="function";fe.writable=n=>fe(n)&&n.writable!==!1&&typeof n._write=="function"&&typeof n._writableState=="object";fe.readable=n=>fe(n)&&n.readable!==!1&&typeof n._read=="function"&&typeof n._readableState=="object";fe.duplex=n=>fe.writable(n)&&fe.readable(n);fe.transform=n=>fe.duplex(n)&&typeof n._transform=="function";Da.exports=fe});var za=A((bd,La)=>{"use strict";var{PassThrough:vc}=require("stream");La.exports=n=>{n=M({},n);let{array:r}=n,{encoding:o}=n,a=o==="buffer",s=!1;r?s=!(o||a):o=o||"utf8",a&&(o=null);let l=new vc({objectMode:s});o&&l.setEncoding(o);let f=0,m=[];return l.on("data",b=>{m.push(b),s?f=m.length:f+=b.length}),l.getBufferedValue=()=>r?m:a?Buffer.concat(m,f):m.join(""),l.getBufferedLength=()=>f,l}});var $a=A((yd,qt)=>{"use strict";var{constants:Bc}=require("buffer"),kc=require("stream"),{promisify:Oc}=require("util"),Ic=za(),xc=Oc(kc.pipeline),Fn=class extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}};async function Ln(n,r){if(!n)throw new Error("Expected a stream");r=M({maxBuffer:1/0},r);let{maxBuffer:o}=r,a=Ic(r);return await new Promise((s,l)=>{let f=m=>{m&&a.getBufferedLength()<=Bc.MAX_LENGTH&&(m.bufferedData=a.getBufferedValue()),l(m)};(async()=>{try{await xc(n,a),s()}catch(m){f(m)}})(),a.on("data",()=>{a.getBufferedLength()>o&&f(new Fn)})}),a.getBufferedValue()}qt.exports=Ln;qt.exports.buffer=(n,r)=>Ln(n,Se(M({},r),{encoding:"buffer"}));qt.exports.array=(n,r)=>Ln(n,Se(M({},r),{array:!0}));qt.exports.MaxBufferError=Fn});var ja=A((gd,Ma)=>{"use strict";var{PassThrough:qc}=require("stream");Ma.exports=function(){var n=[],r=new qc({objectMode:!0});return r.setMaxListeners(0),r.add=o,r.isEmpty=a,r.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(o),r;function o(l){return Array.isArray(l)?(l.forEach(o),this):(n.push(l),l.once("end",s.bind(null,l)),l.once("error",r.emit.bind(r,"error")),l.pipe(r,{end:!1}),this)}function a(){return n.length==0}function s(l){n=n.filter(function(f){return f!==l}),!n.length&&r.readable&&r.end()}}});var Ga=A((Sd,Ha)=>{"use strict";var Ua=Fa(),Na=$a(),Wc=ja(),Dc=(n,r)=>{r===void 0||n.stdin===void 0||(Ua(r)?r.pipe(n.stdin):n.stdin.end(r))},Fc=(n,{all:r})=>{if(!r||!n.stdout&&!n.stderr)return;let o=Wc();return n.stdout&&o.add(n.stdout),n.stderr&&o.add(n.stderr),o},zn=async(n,r)=>{if(!!n){n.destroy();try{return await r}catch(o){return o.bufferedData}}},$n=(n,{encoding:r,buffer:o,maxBuffer:a})=>{if(!(!n||!o))return r?Na(n,{encoding:r,maxBuffer:a}):Na.buffer(n,{maxBuffer:a})},Lc=async({stdout:n,stderr:r,all:o},{encoding:a,buffer:s,maxBuffer:l},f)=>{let m=$n(n,{encoding:a,buffer:s,maxBuffer:l}),b=$n(r,{encoding:a,buffer:s,maxBuffer:l}),p=$n(o,{encoding:a,buffer:s,maxBuffer:l*2});try{return await Promise.all([f,m,b,p])}catch(R){return Promise.all([{error:R,signal:R.signal,timedOut:R.timedOut},zn(n,m),zn(r,b),zn(o,p)])}},zc=({input:n})=>{if(Ua(n))throw new TypeError("The `input` option cannot be a stream in sync mode")};Ha.exports={handleInput:Dc,makeAllStream:Fc,getSpawnedResult:Lc,validateInputSync:zc}});var Ya=A((_d,Va)=>{"use strict";var $c=(async()=>{})().constructor.prototype,Mc=["then","catch","finally"].map(n=>[n,Reflect.getOwnPropertyDescriptor($c,n)]),jc=(n,r)=>{for(let[o,a]of Mc){let s=typeof r=="function"?(...l)=>Reflect.apply(a.value,r(),l):a.value.bind(r);Reflect.defineProperty(n,o,Se(M({},a),{value:s}))}return n},Nc=n=>new Promise((r,o)=>{n.on("exit",(a,s)=>{r({exitCode:a,signal:s})}),n.on("error",a=>{o(a)}),n.stdin&&n.stdin.on("error",a=>{o(a)})});Va.exports={mergePromise:jc,getSpawnedPromise:Nc}});var Ka=A((wd,Xa)=>{"use strict";var Qa=(n,r=[])=>Array.isArray(r)?[n,...r]:[n],Uc=/^[\w.-]+$/,Hc=/"/g,Gc=n=>typeof n!="string"||Uc.test(n)?n:`"${n.replace(Hc,'\\"')}"`,Vc=(n,r)=>Qa(n,r).join(" "),Yc=(n,r)=>Qa(n,r).map(o=>Gc(o)).join(" "),Qc=/ +/g,Xc=n=>{let r=[];for(let o of n.trim().split(Qc)){let a=r[r.length-1];a&&a.endsWith("\\")?r[r.length-1]=`${a.slice(0,-1)} ${o}`:r.push(o)}return r};Xa.exports={joinCommand:Vc,getEscapedCommand:Yc,parseCommand:Xc}});var os=A((Rd,ct)=>{"use strict";var Kc=require("path"),Mn=require("child_process"),Zc=ua(),Jc=ca(),ef=ha(),tf=ya(),Or=Ca(),Ja=Aa(),{spawnedKill:rf,spawnedCancel:nf,setupTimeout:of,validateTimeout:af,setExitHandler:sf}=Wa(),{handleInput:uf,getSpawnedResult:lf,makeAllStream:cf,validateInputSync:ff}=Ga(),{mergePromise:Za,getSpawnedPromise:df}=Ya(),{joinCommand:es,parseCommand:ts,getEscapedCommand:rs}=Ka(),hf=1e3*1e3*100,mf=({env:n,extendEnv:r,preferLocal:o,localDir:a,execPath:s})=>{let l=r?M(M({},process.env),n):n;return o?ef.env({env:l,cwd:a,execPath:s}):l},ns=(n,r,o={})=>{let a=Zc._parse(n,r,o);return n=a.command,r=a.args,o=a.options,o=M({maxBuffer:hf,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0},o),o.env=mf(o),o.stdio=Ja(o),process.platform==="win32"&&Kc.basename(n,".exe")==="cmd"&&r.unshift("/q"),{file:n,args:r,options:o,parsed:a}},Wt=(n,r,o)=>typeof r!="string"&&!Buffer.isBuffer(r)?o===void 0?void 0:"":n.stripFinalNewline?Jc(r):r,Ir=(n,r,o)=>{let a=ns(n,r,o),s=es(n,r),l=rs(n,r);af(a.options);let f;try{f=Mn.spawn(a.file,a.args,a.options)}catch(g){let y=new Mn.ChildProcess,C=Promise.reject(Or({error:g,stdout:"",stderr:"",all:"",command:s,escapedCommand:l,parsed:a,timedOut:!1,isCanceled:!1,killed:!1}));return Za(y,C)}let m=df(f),b=of(f,a.options,m),p=sf(f,a.options,b),R={isCanceled:!1};f.kill=rf.bind(null,f.kill.bind(f)),f.cancel=nf.bind(null,f,R);let S=tf(async()=>{let[{error:g,exitCode:y,signal:C,timedOut:P},v,W,U]=await lf(f,a.options,p),k=Wt(a.options,v),z=Wt(a.options,W),I=Wt(a.options,U);if(g||y!==0||C!==null){let ne=Or({error:g,exitCode:y,signal:C,stdout:k,stderr:z,all:I,command:s,escapedCommand:l,parsed:a,timedOut:P,isCanceled:R.isCanceled,killed:f.killed});if(!a.options.reject)return ne;throw ne}return{command:s,escapedCommand:l,exitCode:0,stdout:k,stderr:z,all:I,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return uf(f,a.options.input),f.all=cf(f,a.options),Za(f,S)};ct.exports=Ir;ct.exports.sync=(n,r,o)=>{let a=ns(n,r,o),s=es(n,r),l=rs(n,r);ff(a.options);let f;try{f=Mn.spawnSync(a.file,a.args,a.options)}catch(p){throw Or({error:p,stdout:"",stderr:"",all:"",command:s,escapedCommand:l,parsed:a,timedOut:!1,isCanceled:!1,killed:!1})}let m=Wt(a.options,f.stdout,f.error),b=Wt(a.options,f.stderr,f.error);if(f.error||f.status!==0||f.signal!==null){let p=Or({stdout:m,stderr:b,error:f.error,signal:f.signal,exitCode:f.status,command:s,escapedCommand:l,parsed:a,timedOut:f.error&&f.error.code==="ETIMEDOUT",isCanceled:!1,killed:f.signal!==null});if(!a.options.reject)return p;throw p}return{command:s,escapedCommand:l,exitCode:0,stdout:m,stderr:b,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};ct.exports.command=(n,r)=>{let[o,...a]=ts(n);return Ir(o,a,r)};ct.exports.commandSync=(n,r)=>{let[o,...a]=ts(n);return Ir.sync(o,a,r)};ct.exports.node=(n,r,o={})=>{r&&!Array.isArray(r)&&typeof r=="object"&&(o=r,r=[]);let a=Ja.node(o),s=process.execArgv.filter(m=>!m.startsWith("--inspect")),{nodePath:l=process.execPath,nodeOptions:f=s}=o;return Ir(l,[...f,n,...Array.isArray(r)?r:[]],Se(M({},o),{stdin:void 0,stdout:void 0,stderr:void 0,stdio:a,shell:!1}))}});var cs=A((xr,ls)=>{(function(n,r){typeof xr=="object"&&typeof ls<"u"?r(xr):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n.WebStreamsPolyfill={}))})(xr,function(n){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function a(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=a();function l(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,m=Promise,b=Promise.prototype.then,p=Promise.resolve.bind(m),R=Promise.reject.bind(m);function T(e){return new m(e)}function S(e){return p(e)}function g(e){return R(e)}function y(e,t,i){return b.call(e,t,i)}function C(e,t,i){y(y(e,t,i),void 0,f)}function P(e,t){C(e,t)}function v(e,t){C(e,void 0,t)}function W(e,t,i){return y(e,t,i)}function U(e){y(e,void 0,f)}let k=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let t=S(void 0);return i=>y(t,i)})();function z(e,t,i){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,i)}function I(e,t,i){try{return S(z(e,t,i))}catch(u){return g(u)}}let ne=16384;class X{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let i=this._back,u=i;i._elements.length===ne-1&&(u={_elements:[],_next:void 0}),i._elements.push(t),u!==i&&(this._back=u,i._next=u),++this._size}shift(){let t=this._front,i=t,u=this._cursor,c=u+1,d=t._elements,h=d[u];return c===ne&&(i=t._next,c=0),--this._size,this._cursor=c,t!==i&&(this._front=i),d[u]=void 0,h}forEach(t){let i=this._cursor,u=this._front,c=u._elements;for(;(i!==c.length||u._next!==void 0)&&!(i===c.length&&(u=u._next,c=u._elements,i=0,c.length===0));)t(c[i]),++i}peek(){let t=this._front,i=this._cursor;return t._elements[i]}}function eo(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?Ur(e):t._state==="closed"?js(e):to(e,t._storedError)}function Nr(e,t){let i=e._ownerReadableStream;return ae(i,t)}function me(e){e._ownerReadableStream._state==="readable"?Hr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Ns(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function He(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Ur(e){e._closedPromise=T((t,i)=>{e._closedPromise_resolve=t,e._closedPromise_reject=i})}function to(e,t){Ur(e),Hr(e,t)}function js(e){Ur(e),ro(e)}function Hr(e,t){e._closedPromise_reject!==void 0&&(U(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Ns(e,t){to(e,t)}function ro(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let no=r("[[AbortSteps]]"),oo=r("[[ErrorSteps]]"),Gr=r("[[CancelSteps]]"),Vr=r("[[PullSteps]]"),io=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Us=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Hs(e){return typeof e=="object"||typeof e=="function"}function pe(e,t){if(e!==void 0&&!Hs(e))throw new TypeError(`${t} is not an object.`)}function oe(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function Gs(e){return typeof e=="object"&&e!==null||typeof e=="function"}function ao(e,t){if(!Gs(e))throw new TypeError(`${t} is not an object.`)}function be(e,t,i){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${i}'.`)}function Yr(e,t,i){if(e===void 0)throw new TypeError(`${t} is required in '${i}'.`)}function Qr(e){return Number(e)}function so(e){return e===0?0:e}function Vs(e){return so(Us(e))}function uo(e,t){let u=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=so(c),!io(c))throw new TypeError(`${t} is not a finite number`);if(c=Vs(c),c<0||c>u)throw new TypeError(`${t} is outside the accepted range of ${0} to ${u}, inclusive`);return!io(c)||c===0?0:c}function Xr(e,t){if(!Ae(e))throw new TypeError(`${t} is not a ReadableStream.`)}function Ge(e){return new mt(e)}function lo(e,t){e._reader._readRequests.push(t)}function Kr(e,t,i){let c=e._reader._readRequests.shift();i?c._closeSteps():c._chunkSteps(t)}function Nt(e){return e._reader._readRequests.length}function co(e){let t=e._reader;return!(t===void 0||!Te(t))}class mt{constructor(t){if(be(t,1,"ReadableStreamDefaultReader"),Xr(t,"First parameter"),ve(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");eo(this,t),this._readRequests=new X}get closed(){return Te(this)?this._closedPromise:g(Ut("closed"))}cancel(t=void 0){return Te(this)?this._ownerReadableStream===void 0?g(He("cancel")):Nr(this,t):g(Ut("cancel"))}read(){if(!Te(this))return g(Ut("read"));if(this._ownerReadableStream===void 0)return g(He("read from"));let t,i,u=T((d,h)=>{t=d,i=h});return pt(this,{_chunkSteps:d=>t({value:d,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:d=>i(d)}),u}releaseLock(){if(!Te(this))throw Ut("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");me(this)}}}Object.defineProperties(mt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(mt.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Te(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof mt}function pt(e,t){let i=e._ownerReadableStream;i._disturbed=!0,i._state==="closed"?t._closeSteps():i._state==="errored"?t._errorSteps(i._storedError):i._readableStreamController[Vr](t)}function Ut(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let fo=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ho{constructor(t,i){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=i}next(){let t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?W(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){let i=()=>this._returnSteps(t);return this._ongoingPromise?W(this._ongoingPromise,i,i):i()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let t=this._reader;if(t._ownerReadableStream===void 0)return g(He("iterate"));let i,u,c=T((h,_)=>{i=h,u=_});return pt(t,{_chunkSteps:h=>{this._ongoingPromise=void 0,k(()=>i({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,me(t),i({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,me(t),u(h)}}),c}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let i=this._reader;if(i._ownerReadableStream===void 0)return g(He("finish iterating"));if(!this._preventCancel){let u=Nr(i,t);return me(i),W(u,()=>({value:t,done:!0}))}return me(i),S({value:t,done:!0})}}let mo={next(){return po(this)?this._asyncIteratorImpl.next():g(bo("next"))},return(e){return po(this)?this._asyncIteratorImpl.return(e):g(bo("return"))}};fo!==void 0&&Object.setPrototypeOf(mo,fo);function Ys(e,t){let i=Ge(e),u=new ho(i,t),c=Object.create(mo);return c._asyncIteratorImpl=u,c}function po(e){if(!l(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ho}catch{return!1}}function bo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let yo=Number.isNaN||function(e){return e!==e};function bt(e){return e.slice()}function go(e,t,i,u,c){new Uint8Array(e).set(new Uint8Array(i,u,c),t)}function $f(e){return e}function Ht(e){return!1}function So(e,t,i){if(e.slice)return e.slice(t,i);let u=i-t,c=new ArrayBuffer(u);return go(c,0,e,t,u),c}function Qs(e){return!(typeof e!="number"||yo(e)||e<0)}function _o(e){let t=So(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function Zr(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function Jr(e,t,i){if(!Qs(i)||i===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:i}),e._queueTotalSize+=i}function Xs(e){return e._queue.peek().value}function Ee(e){e._queue=new X,e._queueTotalSize=0}class yt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!en(this))throw on("view");return this._view}respond(t){if(!en(this))throw on("respond");if(be(t,1,"respond"),t=uo(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Ht(this._view.buffer),Xt(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!en(this))throw on("respondWithNewView");if(be(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Ht(t.buffer),Kt(this._associatedReadableByteStreamController,t)}}Object.defineProperties(yt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(yt.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Ve{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!xe(this))throw St("byobRequest");return nn(this)}get desiredSize(){if(!xe(this))throw St("desiredSize");return vo(this)}close(){if(!xe(this))throw St("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);gt(this)}enqueue(t){if(!xe(this))throw St("enqueue");if(be(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let i=this._controlledReadableByteStream._state;if(i!=="readable")throw new TypeError(`The stream (in ${i} state) is not in the readable state and cannot be enqueued to`);Qt(this,t)}error(t=void 0){if(!xe(this))throw St("error");ie(this,t)}[Gr](t){wo(this),Ee(this);let i=this._cancelAlgorithm(t);return Yt(this),i}[Vr](t){let i=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,Co(this);let d=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);t._chunkSteps(d);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let c;try{c=new ArrayBuffer(u)}catch(h){t._errorSteps(h);return}let d={buffer:c,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}lo(i,t),qe(this)}}Object.defineProperties(Ve.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ve.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function xe(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Ve}function en(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof yt}function qe(e){if(!eu(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();C(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,qe(e))},u=>{ie(e,u)})}function wo(e){rn(e),e._pendingPullIntos=new X}function tn(e,t){let i=!1;e._state==="closed"&&(i=!0);let u=Ro(t);t.readerType==="default"?Kr(e,u,i):nu(e,u,i)}function Ro(e){let t=e.bytesFilled,i=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/i)}function Gt(e,t,i,u){e._queue.push({buffer:t,byteOffset:i,byteLength:u}),e._queueTotalSize+=u}function To(e,t){let i=t.elementSize,u=t.bytesFilled-t.bytesFilled%i,c=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),d=t.bytesFilled+c,h=d-d%i,_=c,E=!1;h>u&&(_=h-t.bytesFilled,E=!0);let O=e._queue;for(;_>0;){let x=O.peek(),q=Math.min(_,x.byteLength),$=t.byteOffset+t.bytesFilled;go(t.buffer,$,x.buffer,x.byteOffset,q),x.byteLength===q?O.shift():(x.byteOffset+=q,x.byteLength-=q),e._queueTotalSize-=q,Eo(e,q,t),_-=q}return E}function Eo(e,t,i){i.bytesFilled+=t}function Co(e){e._queueTotalSize===0&&e._closeRequested?(Yt(e),At(e._controlledReadableByteStream)):qe(e)}function rn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Po(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();To(e,t)&&(Vt(e),tn(e._controlledReadableByteStream,t))}}function Ks(e,t,i){let u=e._controlledReadableByteStream,c=1;t.constructor!==DataView&&(c=t.constructor.BYTES_PER_ELEMENT);let d=t.constructor,h=t.buffer,_={buffer:h,bufferByteLength:h.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:c,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(_),Oo(u,i);return}if(u._state==="closed"){let E=new d(_.buffer,_.byteOffset,0);i._closeSteps(E);return}if(e._queueTotalSize>0){if(To(e,_)){let E=Ro(_);Co(e),i._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");ie(e,E),i._errorSteps(E);return}}e._pendingPullIntos.push(_),Oo(u,i),qe(e)}function Zs(e,t){let i=e._controlledReadableByteStream;if(an(i))for(;Io(i)>0;){let u=Vt(e);tn(i,u)}}function Js(e,t,i){if(Eo(e,t,i),i.bytesFilled<i.elementSize)return;Vt(e);let u=i.bytesFilled%i.elementSize;if(u>0){let c=i.byteOffset+i.bytesFilled,d=So(i.buffer,c-u,c);Gt(e,d,0,d.byteLength)}i.bytesFilled-=u,tn(e._controlledReadableByteStream,i),Po(e)}function Ao(e,t){let i=e._pendingPullIntos.peek();rn(e),e._controlledReadableByteStream._state==="closed"?Zs(e):Js(e,t,i),qe(e)}function Vt(e){return e._pendingPullIntos.shift()}function eu(e){let t=e._controlledReadableByteStream;return t._state!=="readable"||e._closeRequested||!e._started?!1:!!(co(t)&&Nt(t)>0||an(t)&&Io(t)>0||vo(e)>0)}function Yt(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function gt(e){let t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ie(e,u),u}Yt(e),At(t)}}function Qt(e,t){let i=e._controlledReadableByteStream;if(e._closeRequested||i._state!=="readable")return;let u=t.buffer,c=t.byteOffset,d=t.byteLength,h=u;if(e._pendingPullIntos.length>0){let _=e._pendingPullIntos.peek();Ht(_.buffer),_.buffer=_.buffer}if(rn(e),co(i))if(Nt(i)===0)Gt(e,h,c,d);else{e._pendingPullIntos.length>0&&Vt(e);let _=new Uint8Array(h,c,d);Kr(i,_,!1)}else an(i)?(Gt(e,h,c,d),Po(e)):Gt(e,h,c,d);qe(e)}function ie(e,t){let i=e._controlledReadableByteStream;i._state==="readable"&&(wo(e),Ee(e),Yt(e),ri(i,t))}function nn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),i=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),u=Object.create(yt.prototype);ru(u,e,i),e._byobRequest=u}return e._byobRequest}function vo(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Xt(e,t){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(i.bytesFilled+t>i.byteLength)throw new RangeError("bytesWritten out of range")}i.buffer=i.buffer,Ao(e,t)}function Kt(e,t){let i=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(i.byteOffset+i.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(i.bytesFilled+t.byteLength>i.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=t.byteLength;i.buffer=t.buffer,Ao(e,c)}function Bo(e,t,i,u,c,d,h){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Ee(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=d,t._pullAlgorithm=u,t._cancelAlgorithm=c,t._autoAllocateChunkSize=h,t._pendingPullIntos=new X,e._readableStreamController=t;let _=i();C(S(_),()=>{t._started=!0,qe(t)},E=>{ie(t,E)})}function tu(e,t,i){let u=Object.create(Ve.prototype),c=()=>{},d=()=>S(void 0),h=()=>S(void 0);t.start!==void 0&&(c=()=>t.start(u)),t.pull!==void 0&&(d=()=>t.pull(u)),t.cancel!==void 0&&(h=E=>t.cancel(E));let _=t.autoAllocateChunkSize;if(_===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Bo(e,u,c,d,h,i,_)}function ru(e,t,i){e._associatedReadableByteStreamController=t,e._view=i}function on(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function St(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function ko(e){return new _t(e)}function Oo(e,t){e._reader._readIntoRequests.push(t)}function nu(e,t,i){let c=e._reader._readIntoRequests.shift();i?c._closeSteps(t):c._chunkSteps(t)}function Io(e){return e._reader._readIntoRequests.length}function an(e){let t=e._reader;return!(t===void 0||!We(t))}class _t{constructor(t){if(be(t,1,"ReadableStreamBYOBReader"),Xr(t,"First parameter"),ve(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!xe(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");eo(this,t),this._readIntoRequests=new X}get closed(){return We(this)?this._closedPromise:g(Zt("closed"))}cancel(t=void 0){return We(this)?this._ownerReadableStream===void 0?g(He("cancel")):Nr(this,t):g(Zt("cancel"))}read(t){if(!We(this))return g(Zt("read"));if(!ArrayBuffer.isView(t))return g(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return g(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return g(new TypeError("view's buffer must have non-zero byteLength"));if(Ht(t.buffer),this._ownerReadableStream===void 0)return g(He("read from"));let i,u,c=T((h,_)=>{i=h,u=_});return xo(this,t,{_chunkSteps:h=>i({value:h,done:!1}),_closeSteps:h=>i({value:h,done:!0}),_errorSteps:h=>u(h)}),c}releaseLock(){if(!We(this))throw Zt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");me(this)}}}Object.defineProperties(_t.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(_t.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function We(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof _t}function xo(e,t,i){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?i._errorSteps(u._storedError):Ks(u._readableStreamController,t,i)}function Zt(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function wt(e,t){let{highWaterMark:i}=e;if(i===void 0)return t;if(yo(i)||i<0)throw new RangeError("Invalid highWaterMark");return i}function Jt(e){let{size:t}=e;return t||(()=>1)}function er(e,t){pe(e,t);let i=e==null?void 0:e.highWaterMark,u=e==null?void 0:e.size;return{highWaterMark:i===void 0?void 0:Qr(i),size:u===void 0?void 0:ou(u,`${t} has member 'size' that`)}}function ou(e,t){return oe(e,t),i=>Qr(e(i))}function iu(e,t){pe(e,t);let i=e==null?void 0:e.abort,u=e==null?void 0:e.close,c=e==null?void 0:e.start,d=e==null?void 0:e.type,h=e==null?void 0:e.write;return{abort:i===void 0?void 0:au(i,e,`${t} has member 'abort' that`),close:u===void 0?void 0:su(u,e,`${t} has member 'close' that`),start:c===void 0?void 0:uu(c,e,`${t} has member 'start' that`),write:h===void 0?void 0:lu(h,e,`${t} has member 'write' that`),type:d}}function au(e,t,i){return oe(e,i),u=>I(e,t,[u])}function su(e,t,i){return oe(e,i),()=>I(e,t,[])}function uu(e,t,i){return oe(e,i),u=>z(e,t,[u])}function lu(e,t,i){return oe(e,i),(u,c)=>I(e,t,[u,c])}function qo(e,t){if(!Ye(e))throw new TypeError(`${t} is not a WritableStream.`)}function cu(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let fu=typeof AbortController=="function";function du(){if(fu)return new AbortController}class Rt{constructor(t={},i={}){t===void 0?t=null:ao(t,"First parameter");let u=er(i,"Second parameter"),c=iu(t,"First parameter");if(Do(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let h=Jt(u),_=wt(u,1);Pu(this,c,_,h)}get locked(){if(!Ye(this))throw ir("locked");return Qe(this)}abort(t=void 0){return Ye(this)?Qe(this)?g(new TypeError("Cannot abort a stream that already has a writer")):tr(this,t):g(ir("abort"))}close(){return Ye(this)?Qe(this)?g(new TypeError("Cannot close a stream that already has a writer")):le(this)?g(new TypeError("Cannot close an already-closing stream")):Fo(this):g(ir("close"))}getWriter(){if(!Ye(this))throw ir("getWriter");return Wo(this)}}Object.defineProperties(Rt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Rt.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function Wo(e){return new Tt(e)}function hu(e,t,i,u,c=1,d=()=>1){let h=Object.create(Rt.prototype);Do(h);let _=Object.create(Xe.prototype);return No(h,_,e,t,i,u,c,d),h}function Do(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new X,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Ye(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Rt}function Qe(e){return e._writer!==void 0}function tr(e,t){var i;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=t,(i=e._writableStreamController._abortController)===null||i===void 0||i.abort();let u=e._state;if(u==="closed"||u==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;u==="erroring"&&(c=!0,t=void 0);let d=T((h,_)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:_,_reason:t,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=d,c||un(e,t),d}function Fo(e){let t=e._state;if(t==="closed"||t==="errored")return g(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let i=T((c,d)=>{let h={_resolve:c,_reject:d};e._closeRequest=h}),u=e._writer;return u!==void 0&&e._backpressure&&t==="writable"&&yn(u),Au(e._writableStreamController),i}function mu(e){return T((i,u)=>{let c={_resolve:i,_reject:u};e._writeRequests.push(c)})}function sn(e,t){if(e._state==="writable"){un(e,t);return}ln(e)}function un(e,t){let i=e._writableStreamController;e._state="erroring",e._storedError=t;let u=e._writer;u!==void 0&&zo(u,t),!Su(e)&&i._started&&ln(e)}function ln(e){e._state="errored",e._writableStreamController[oo]();let t=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(t)}),e._writeRequests=new X,e._pendingAbortRequest===void 0){rr(e);return}let i=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,i._wasAlreadyErroring){i._reject(t),rr(e);return}let u=e._writableStreamController[no](i._reason);C(u,()=>{i._resolve(),rr(e)},c=>{i._reject(c),rr(e)})}function pu(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function bu(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,sn(e,t)}function yu(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let i=e._writer;i!==void 0&&Vo(i)}function gu(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),sn(e,t)}function le(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Su(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function _u(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function wu(e){e._inFlightWriteRequest=e._writeRequests.shift()}function rr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&pn(t,e._storedError)}function cn(e,t){let i=e._writer;i!==void 0&&t!==e._backpressure&&(t?qu(i):yn(i)),e._backpressure=t}class Tt{constructor(t){if(be(t,1,"WritableStreamDefaultWriter"),qo(t,"First parameter"),Qe(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let i=t._state;if(i==="writable")!le(t)&&t._backpressure?sr(this):Yo(this),ar(this);else if(i==="erroring")bn(this,t._storedError),ar(this);else if(i==="closed")Yo(this),Iu(this);else{let u=t._storedError;bn(this,u),Go(this,u)}}get closed(){return De(this)?this._closedPromise:g(Fe("closed"))}get desiredSize(){if(!De(this))throw Fe("desiredSize");if(this._ownerWritableStream===void 0)throw Et("desiredSize");return Cu(this)}get ready(){return De(this)?this._readyPromise:g(Fe("ready"))}abort(t=void 0){return De(this)?this._ownerWritableStream===void 0?g(Et("abort")):Ru(this,t):g(Fe("abort"))}close(){if(!De(this))return g(Fe("close"));let t=this._ownerWritableStream;return t===void 0?g(Et("close")):le(t)?g(new TypeError("Cannot close an already-closing stream")):Lo(this)}releaseLock(){if(!De(this))throw Fe("releaseLock");this._ownerWritableStream!==void 0&&$o(this)}write(t=void 0){return De(this)?this._ownerWritableStream===void 0?g(Et("write to")):Mo(this,t):g(Fe("write"))}}Object.defineProperties(Tt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Tt.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function De(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Tt}function Ru(e,t){let i=e._ownerWritableStream;return tr(i,t)}function Lo(e){let t=e._ownerWritableStream;return Fo(t)}function Tu(e){let t=e._ownerWritableStream,i=t._state;return le(t)||i==="closed"?S(void 0):i==="errored"?g(t._storedError):Lo(e)}function Eu(e,t){e._closedPromiseState==="pending"?pn(e,t):xu(e,t)}function zo(e,t){e._readyPromiseState==="pending"?Qo(e,t):Wu(e,t)}function Cu(e){let t=e._ownerWritableStream,i=t._state;return i==="errored"||i==="erroring"?null:i==="closed"?0:Uo(t._writableStreamController)}function $o(e){let t=e._ownerWritableStream,i=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");zo(e,i),Eu(e,i),t._writer=void 0,e._ownerWritableStream=void 0}function Mo(e,t){let i=e._ownerWritableStream,u=i._writableStreamController,c=vu(u,t);if(i!==e._ownerWritableStream)return g(Et("write to"));let d=i._state;if(d==="errored")return g(i._storedError);if(le(i)||d==="closed")return g(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return g(i._storedError);let h=mu(i);return Bu(u,t,c),h}let jo={};class Xe{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!fn(this))throw mn("abortReason");return this._abortReason}get signal(){if(!fn(this))throw mn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!fn(this))throw mn("error");this._controlledWritableStream._state==="writable"&&Ho(this,t)}[no](t){let i=this._abortAlgorithm(t);return nr(this),i}[oo](){Ee(this)}}Object.defineProperties(Xe.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Xe.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function fn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Xe}function No(e,t,i,u,c,d,h,_){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Ee(t),t._abortReason=void 0,t._abortController=du(),t._started=!1,t._strategySizeAlgorithm=_,t._strategyHWM=h,t._writeAlgorithm=u,t._closeAlgorithm=c,t._abortAlgorithm=d;let E=hn(t);cn(e,E);let O=i(),x=S(O);C(x,()=>{t._started=!0,or(t)},q=>{t._started=!0,sn(e,q)})}function Pu(e,t,i,u){let c=Object.create(Xe.prototype),d=()=>{},h=()=>S(void 0),_=()=>S(void 0),E=()=>S(void 0);t.start!==void 0&&(d=()=>t.start(c)),t.write!==void 0&&(h=O=>t.write(O,c)),t.close!==void 0&&(_=()=>t.close()),t.abort!==void 0&&(E=O=>t.abort(O)),No(e,c,d,h,_,E,i,u)}function nr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Au(e){Jr(e,jo,0),or(e)}function vu(e,t){try{return e._strategySizeAlgorithm(t)}catch(i){return dn(e,i),1}}function Uo(e){return e._strategyHWM-e._queueTotalSize}function Bu(e,t,i){try{Jr(e,t,i)}catch(c){dn(e,c);return}let u=e._controlledWritableStream;if(!le(u)&&u._state==="writable"){let c=hn(e);cn(u,c)}or(e)}function or(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring"){ln(t);return}if(e._queue.length===0)return;let u=Xs(e);u===jo?ku(e):Ou(e,u)}function dn(e,t){e._controlledWritableStream._state==="writable"&&Ho(e,t)}function ku(e){let t=e._controlledWritableStream;_u(t),Zr(e);let i=e._closeAlgorithm();nr(e),C(i,()=>{yu(t)},u=>{gu(t,u)})}function Ou(e,t){let i=e._controlledWritableStream;wu(i);let u=e._writeAlgorithm(t);C(u,()=>{pu(i);let c=i._state;if(Zr(e),!le(i)&&c==="writable"){let d=hn(e);cn(i,d)}or(e)},c=>{i._state==="writable"&&nr(e),bu(i,c)})}function hn(e){return Uo(e)<=0}function Ho(e,t){let i=e._controlledWritableStream;nr(e),un(i,t)}function ir(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function mn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Fe(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Et(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function ar(e){e._closedPromise=T((t,i)=>{e._closedPromise_resolve=t,e._closedPromise_reject=i,e._closedPromiseState="pending"})}function Go(e,t){ar(e),pn(e,t)}function Iu(e){ar(e),Vo(e)}function pn(e,t){e._closedPromise_reject!==void 0&&(U(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function xu(e,t){Go(e,t)}function Vo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function sr(e){e._readyPromise=T((t,i)=>{e._readyPromise_resolve=t,e._readyPromise_reject=i}),e._readyPromiseState="pending"}function bn(e,t){sr(e),Qo(e,t)}function Yo(e){sr(e),yn(e)}function Qo(e,t){e._readyPromise_reject!==void 0&&(U(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function qu(e){sr(e)}function Wu(e,t){bn(e,t)}function yn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let Xo=typeof DOMException<"u"?DOMException:void 0;function Du(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Fu(){let e=function(i,u){this.message=i||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Lu=Du(Xo)?Xo:Fu();function Ko(e,t,i,u,c,d){let h=Ge(e),_=Wo(t);e._disturbed=!0;let E=!1,O=S(void 0);return T((x,q)=>{let $;if(d!==void 0){if($=()=>{let w=new Lu("Aborted","AbortError"),B=[];u||B.push(()=>t._state==="writable"?tr(t,w):S(void 0)),c||B.push(()=>e._state==="readable"?ae(e,w):S(void 0)),Y(()=>Promise.all(B.map(D=>D())),!0,w)},d.aborted){$();return}d.addEventListener("abort",$)}function se(){return T((w,B)=>{function D(K){K?w():y(Je(),D,B)}D(!1)})}function Je(){return E?S(!0):y(_._readyPromise,()=>T((w,B)=>{pt(h,{_chunkSteps:D=>{O=y(Mo(_,D),void 0,o),w(!1)},_closeSteps:()=>w(!0),_errorSteps:B})}))}if(ye(e,h._closedPromise,w=>{u?te(!0,w):Y(()=>tr(t,w),!0,w)}),ye(t,_._closedPromise,w=>{c?te(!0,w):Y(()=>ae(e,w),!0,w)}),H(e,h._closedPromise,()=>{i?te():Y(()=>Tu(_))}),le(t)||t._state==="closed"){let w=new TypeError("the destination writable stream closed before all data could be piped to it");c?te(!0,w):Y(()=>ae(e,w),!0,w)}U(se());function Be(){let w=O;return y(O,()=>w!==O?Be():void 0)}function ye(w,B,D){w._state==="errored"?D(w._storedError):v(B,D)}function H(w,B,D){w._state==="closed"?D():P(B,D)}function Y(w,B,D){if(E)return;E=!0,t._state==="writable"&&!le(t)?P(Be(),K):K();function K(){C(w(),()=>ge(B,D),et=>ge(!0,et))}}function te(w,B){E||(E=!0,t._state==="writable"&&!le(t)?P(Be(),()=>ge(w,B)):ge(w,B))}function ge(w,B){$o(_),me(h),d!==void 0&&d.removeEventListener("abort",$),w?q(B):x(void 0)}})}class Ke{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!ur(this))throw fr("desiredSize");return gn(this)}close(){if(!ur(this))throw fr("close");if(!Ze(this))throw new TypeError("The stream is not in a state that permits close");Pt(this)}enqueue(t=void 0){if(!ur(this))throw fr("enqueue");if(!Ze(this))throw new TypeError("The stream is not in a state that permits enqueue");return cr(this,t)}error(t=void 0){if(!ur(this))throw fr("error");Ce(this,t)}[Gr](t){Ee(this);let i=this._cancelAlgorithm(t);return lr(this),i}[Vr](t){let i=this._controlledReadableStream;if(this._queue.length>0){let u=Zr(this);this._closeRequested&&this._queue.length===0?(lr(this),At(i)):Ct(this),t._chunkSteps(u)}else lo(i,t),Ct(this)}}Object.defineProperties(Ke.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ke.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function ur(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Ke}function Ct(e){if(!Zo(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let i=e._pullAlgorithm();C(i,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ct(e))},u=>{Ce(e,u)})}function Zo(e){let t=e._controlledReadableStream;return!Ze(e)||!e._started?!1:!!(ve(t)&&Nt(t)>0||gn(e)>0)}function lr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Pt(e){if(!Ze(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(lr(e),At(t))}function cr(e,t){if(!Ze(e))return;let i=e._controlledReadableStream;if(ve(i)&&Nt(i)>0)Kr(i,t,!1);else{let u;try{u=e._strategySizeAlgorithm(t)}catch(c){throw Ce(e,c),c}try{Jr(e,t,u)}catch(c){throw Ce(e,c),c}}Ct(e)}function Ce(e,t){let i=e._controlledReadableStream;i._state==="readable"&&(Ee(e),lr(e),ri(i,t))}function gn(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function zu(e){return!Zo(e)}function Ze(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function Jo(e,t,i,u,c,d,h){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Ee(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=h,t._strategyHWM=d,t._pullAlgorithm=u,t._cancelAlgorithm=c,e._readableStreamController=t;let _=i();C(S(_),()=>{t._started=!0,Ct(t)},E=>{Ce(t,E)})}function $u(e,t,i,u){let c=Object.create(Ke.prototype),d=()=>{},h=()=>S(void 0),_=()=>S(void 0);t.start!==void 0&&(d=()=>t.start(c)),t.pull!==void 0&&(h=()=>t.pull(c)),t.cancel!==void 0&&(_=E=>t.cancel(E)),Jo(e,c,d,h,_,i,u)}function fr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Mu(e,t){return xe(e._readableStreamController)?Nu(e):ju(e)}function ju(e,t){let i=Ge(e),u=!1,c=!1,d=!1,h=!1,_,E,O,x,q,$=T(H=>{q=H});function se(){return u?(c=!0,S(void 0)):(u=!0,pt(i,{_chunkSteps:Y=>{k(()=>{c=!1;let te=Y,ge=Y;d||cr(O._readableStreamController,te),h||cr(x._readableStreamController,ge),u=!1,c&&se()})},_closeSteps:()=>{u=!1,d||Pt(O._readableStreamController),h||Pt(x._readableStreamController),(!d||!h)&&q(void 0)},_errorSteps:()=>{u=!1}}),S(void 0))}function Je(H){if(d=!0,_=H,h){let Y=bt([_,E]),te=ae(e,Y);q(te)}return $}function Be(H){if(h=!0,E=H,d){let Y=bt([_,E]),te=ae(e,Y);q(te)}return $}function ye(){}return O=Sn(ye,se,Je),x=Sn(ye,se,Be),v(i._closedPromise,H=>{Ce(O._readableStreamController,H),Ce(x._readableStreamController,H),(!d||!h)&&q(void 0)}),[O,x]}function Nu(e){let t=Ge(e),i=!1,u=!1,c=!1,d=!1,h=!1,_,E,O,x,q,$=T(w=>{q=w});function se(w){v(w._closedPromise,B=>{w===t&&(ie(O._readableStreamController,B),ie(x._readableStreamController,B),(!d||!h)&&q(void 0))})}function Je(){We(t)&&(me(t),t=Ge(e),se(t)),pt(t,{_chunkSteps:B=>{k(()=>{u=!1,c=!1;let D=B,K=B;if(!d&&!h)try{K=_o(B)}catch(et){ie(O._readableStreamController,et),ie(x._readableStreamController,et),q(ae(e,et));return}d||Qt(O._readableStreamController,D),h||Qt(x._readableStreamController,K),i=!1,u?ye():c&&H()})},_closeSteps:()=>{i=!1,d||gt(O._readableStreamController),h||gt(x._readableStreamController),O._readableStreamController._pendingPullIntos.length>0&&Xt(O._readableStreamController,0),x._readableStreamController._pendingPullIntos.length>0&&Xt(x._readableStreamController,0),(!d||!h)&&q(void 0)},_errorSteps:()=>{i=!1}})}function Be(w,B){Te(t)&&(me(t),t=ko(e),se(t));let D=B?x:O,K=B?O:x;xo(t,w,{_chunkSteps:tt=>{k(()=>{u=!1,c=!1;let rt=B?h:d;if(B?d:h)rt||Kt(D._readableStreamController,tt);else{let pi;try{pi=_o(tt)}catch(wn){ie(D._readableStreamController,wn),ie(K._readableStreamController,wn),q(ae(e,wn));return}rt||Kt(D._readableStreamController,tt),Qt(K._readableStreamController,pi)}i=!1,u?ye():c&&H()})},_closeSteps:tt=>{i=!1;let rt=B?h:d,_r=B?d:h;rt||gt(D._readableStreamController),_r||gt(K._readableStreamController),tt!==void 0&&(rt||Kt(D._readableStreamController,tt),!_r&&K._readableStreamController._pendingPullIntos.length>0&&Xt(K._readableStreamController,0)),(!rt||!_r)&&q(void 0)},_errorSteps:()=>{i=!1}})}function ye(){if(i)return u=!0,S(void 0);i=!0;let w=nn(O._readableStreamController);return w===null?Je():Be(w._view,!1),S(void 0)}function H(){if(i)return c=!0,S(void 0);i=!0;let w=nn(x._readableStreamController);return w===null?Je():Be(w._view,!0),S(void 0)}function Y(w){if(d=!0,_=w,h){let B=bt([_,E]),D=ae(e,B);q(D)}return $}function te(w){if(h=!0,E=w,d){let B=bt([_,E]),D=ae(e,B);q(D)}return $}function ge(){}return O=ti(ge,ye,Y),x=ti(ge,H,te),se(t),[O,x]}function Uu(e,t){pe(e,t);let i=e,u=i==null?void 0:i.autoAllocateChunkSize,c=i==null?void 0:i.cancel,d=i==null?void 0:i.pull,h=i==null?void 0:i.start,_=i==null?void 0:i.type;return{autoAllocateChunkSize:u===void 0?void 0:uo(u,`${t} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:Hu(c,i,`${t} has member 'cancel' that`),pull:d===void 0?void 0:Gu(d,i,`${t} has member 'pull' that`),start:h===void 0?void 0:Vu(h,i,`${t} has member 'start' that`),type:_===void 0?void 0:Yu(_,`${t} has member 'type' that`)}}function Hu(e,t,i){return oe(e,i),u=>I(e,t,[u])}function Gu(e,t,i){return oe(e,i),u=>I(e,t,[u])}function Vu(e,t,i){return oe(e,i),u=>z(e,t,[u])}function Yu(e,t){if(e=`${e}`,e!=="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Qu(e,t){pe(e,t);let i=e==null?void 0:e.mode;return{mode:i===void 0?void 0:Xu(i,`${t} has member 'mode' that`)}}function Xu(e,t){if(e=`${e}`,e!=="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Ku(e,t){pe(e,t);let i=e==null?void 0:e.preventCancel;return{preventCancel:Boolean(i)}}function ei(e,t){pe(e,t);let i=e==null?void 0:e.preventAbort,u=e==null?void 0:e.preventCancel,c=e==null?void 0:e.preventClose,d=e==null?void 0:e.signal;return d!==void 0&&Zu(d,`${t} has member 'signal' that`),{preventAbort:Boolean(i),preventCancel:Boolean(u),preventClose:Boolean(c),signal:d}}function Zu(e,t){if(!cu(e))throw new TypeError(`${t} is not an AbortSignal.`)}function Ju(e,t){pe(e,t);let i=e==null?void 0:e.readable;Yr(i,"readable","ReadableWritablePair"),Xr(i,`${t} has member 'readable' that`);let u=e==null?void 0:e.writable;return Yr(u,"writable","ReadableWritablePair"),qo(u,`${t} has member 'writable' that`),{readable:i,writable:u}}class Pe{constructor(t={},i={}){t===void 0?t=null:ao(t,"First parameter");let u=er(i,"Second parameter"),c=Uu(t,"First parameter");if(_n(this),c.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=wt(u,0);tu(this,c,d)}else{let d=Jt(u),h=wt(u,1);$u(this,c,h,d)}}get locked(){if(!Ae(this))throw Le("locked");return ve(this)}cancel(t=void 0){return Ae(this)?ve(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):ae(this,t):g(Le("cancel"))}getReader(t=void 0){if(!Ae(this))throw Le("getReader");return Qu(t,"First parameter").mode===void 0?Ge(this):ko(this)}pipeThrough(t,i={}){if(!Ae(this))throw Le("pipeThrough");be(t,1,"pipeThrough");let u=Ju(t,"First parameter"),c=ei(i,"Second parameter");if(ve(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Qe(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=Ko(this,u.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return U(d),u.readable}pipeTo(t,i={}){if(!Ae(this))return g(Le("pipeTo"));if(t===void 0)return g("Parameter 1 is required in 'pipeTo'.");if(!Ye(t))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=ei(i,"Second parameter")}catch(c){return g(c)}return ve(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Qe(t)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Ko(this,t,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!Ae(this))throw Le("tee");let t=Mu(this);return bt(t)}values(t=void 0){if(!Ae(this))throw Le("values");let i=Ku(t,"First parameter");return Ys(this,i.preventCancel)}}Object.defineProperties(Pe.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Pe.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(Pe.prototype,r.asyncIterator,{value:Pe.prototype.values,writable:!0,configurable:!0});function Sn(e,t,i,u=1,c=()=>1){let d=Object.create(Pe.prototype);_n(d);let h=Object.create(Ke.prototype);return Jo(d,h,e,t,i,u,c),d}function ti(e,t,i){let u=Object.create(Pe.prototype);_n(u);let c=Object.create(Ve.prototype);return Bo(u,c,e,t,i,0,void 0),u}function _n(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ae(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Pe}function ve(e){return e._reader!==void 0}function ae(e,t){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return g(e._storedError);At(e);let i=e._reader;i!==void 0&&We(i)&&(i._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),i._readIntoRequests=new X);let u=e._readableStreamController[Gr](t);return W(u,o)}function At(e){e._state="closed";let t=e._reader;t!==void 0&&(ro(t),Te(t)&&(t._readRequests.forEach(i=>{i._closeSteps()}),t._readRequests=new X))}function ri(e,t){e._state="errored",e._storedError=t;let i=e._reader;i!==void 0&&(Hr(i,t),Te(i)?(i._readRequests.forEach(u=>{u._errorSteps(t)}),i._readRequests=new X):(i._readIntoRequests.forEach(u=>{u._errorSteps(t)}),i._readIntoRequests=new X))}function Le(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function ni(e,t){pe(e,t);let i=e==null?void 0:e.highWaterMark;return Yr(i,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Qr(i)}}let oi=e=>e.byteLength;try{Object.defineProperty(oi,"name",{value:"size",configurable:!0})}catch{}class dr{constructor(t){be(t,1,"ByteLengthQueuingStrategy"),t=ni(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!ai(this))throw ii("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!ai(this))throw ii("size");return oi}}Object.defineProperties(dr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(dr.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function ii(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function ai(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof dr}let si=()=>1;try{Object.defineProperty(si,"name",{value:"size",configurable:!0})}catch{}class hr{constructor(t){be(t,1,"CountQueuingStrategy"),t=ni(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!li(this))throw ui("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!li(this))throw ui("size");return si}}Object.defineProperties(hr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(hr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function ui(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function li(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof hr}function el(e,t){pe(e,t);let i=e==null?void 0:e.flush,u=e==null?void 0:e.readableType,c=e==null?void 0:e.start,d=e==null?void 0:e.transform,h=e==null?void 0:e.writableType;return{flush:i===void 0?void 0:tl(i,e,`${t} has member 'flush' that`),readableType:u,start:c===void 0?void 0:rl(c,e,`${t} has member 'start' that`),transform:d===void 0?void 0:nl(d,e,`${t} has member 'transform' that`),writableType:h}}function tl(e,t,i){return oe(e,i),u=>I(e,t,[u])}function rl(e,t,i){return oe(e,i),u=>z(e,t,[u])}function nl(e,t,i){return oe(e,i),(u,c)=>I(e,t,[u,c])}class mr{constructor(t={},i={},u={}){t===void 0&&(t=null);let c=er(i,"Second parameter"),d=er(u,"Third parameter"),h=el(t,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let _=wt(d,0),E=Jt(d),O=wt(c,1),x=Jt(c),q,$=T(se=>{q=se});ol(this,$,O,x,_,E),al(this,h),h.start!==void 0?q(h.start(this._transformStreamController)):q(void 0)}get readable(){if(!ci(this))throw mi("readable");return this._readable}get writable(){if(!ci(this))throw mi("writable");return this._writable}}Object.defineProperties(mr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(mr.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function ol(e,t,i,u,c,d){function h(){return t}function _($){return ll(e,$)}function E($){return cl(e,$)}function O(){return fl(e)}e._writable=hu(h,_,O,E,i,u);function x(){return dl(e)}function q($){return br(e,$),S(void 0)}e._readable=Sn(h,x,q,c,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,yr(e,!0),e._transformStreamController=void 0}function ci(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof mr}function pr(e,t){Ce(e._readable._readableStreamController,t),br(e,t)}function br(e,t){fi(e._transformStreamController),dn(e._writable._writableStreamController,t),e._backpressure&&yr(e,!1)}function yr(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=T(i=>{e._backpressureChangePromise_resolve=i}),e._backpressure=t}class vt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!gr(this))throw Sr("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return gn(t)}enqueue(t=void 0){if(!gr(this))throw Sr("enqueue");di(this,t)}error(t=void 0){if(!gr(this))throw Sr("error");sl(this,t)}terminate(){if(!gr(this))throw Sr("terminate");ul(this)}}Object.defineProperties(vt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function gr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof vt}function il(e,t,i,u){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=i,t._flushAlgorithm=u}function al(e,t){let i=Object.create(vt.prototype),u=d=>{try{return di(i,d),S(void 0)}catch(h){return g(h)}},c=()=>S(void 0);t.transform!==void 0&&(u=d=>t.transform(d,i)),t.flush!==void 0&&(c=()=>t.flush(i)),il(e,i,u,c)}function fi(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function di(e,t){let i=e._controlledTransformStream,u=i._readable._readableStreamController;if(!Ze(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{cr(u,t)}catch(d){throw br(i,d),i._readable._storedError}zu(u)!==i._backpressure&&yr(i,!0)}function sl(e,t){pr(e._controlledTransformStream,t)}function hi(e,t){let i=e._transformAlgorithm(t);return W(i,void 0,u=>{throw pr(e._controlledTransformStream,u),u})}function ul(e){let t=e._controlledTransformStream,i=t._readable._readableStreamController;Pt(i);let u=new TypeError("TransformStream terminated");br(t,u)}function ll(e,t){let i=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return W(u,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return hi(i,t)})}return hi(i,t)}function cl(e,t){return pr(e,t),S(void 0)}function fl(e){let t=e._readable,i=e._transformStreamController,u=i._flushAlgorithm();return fi(i),W(u,()=>{if(t._state==="errored")throw t._storedError;Pt(t._readableStreamController)},c=>{throw pr(e,c),t._storedError})}function dl(e){return yr(e,!1),e._backpressureChangePromise}function Sr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function mi(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}n.ByteLengthQueuingStrategy=dr,n.CountQueuingStrategy=hr,n.ReadableByteStreamController=Ve,n.ReadableStream=Pe,n.ReadableStreamBYOBReader=_t,n.ReadableStreamBYOBRequest=yt,n.ReadableStreamDefaultController=Ke,n.ReadableStreamDefaultReader=mt,n.TransformStream=mr,n.TransformStreamDefaultController=vt,n.WritableStream=Rt,n.WritableStreamDefaultController=Xe,n.WritableStreamDefaultWriter=Tt,Object.defineProperty(n,"__esModule",{value:!0})})});var fs=A(()=>{if(!globalThis.ReadableStream)try{let n=require("node:process"),{emitWarning:r}=n;try{n.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),n.emitWarning=r}catch(o){throw n.emitWarning=r,o}}catch{Object.assign(globalThis,cs())}try{let{Blob:n}=require("buffer");n&&!n.prototype.stream&&(n.prototype.stream=function(o){let a=0,s=this;return new ReadableStream({type:"bytes",async pull(l){let m=await s.slice(a,Math.min(s.size,a+65536)).arrayBuffer();a+=m.byteLength,l.enqueue(new Uint8Array(m)),a===s.size&&l.close()}})})}catch{}});async function*jn(n,r=!0){for(let o of n)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(r){let a=o.byteOffset,s=o.byteOffset+o.byteLength;for(;a!==s;){let l=Math.min(s-a,ds),f=o.buffer.slice(a,a+l);a+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let a=0,s=o;for(;a!==s.size;){let f=await s.slice(a,Math.min(s.size,a+ds)).arrayBuffer();a+=f.byteLength,yield new Uint8Array(f)}}}var Ad,ds,hs,bf,_e,Dt=kt(()=>{Ad=ce(fs(),1);ds=65536;hs=class Nn{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],o={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let a=new TextEncoder;for(let l of r){let f;ArrayBuffer.isView(l)?f=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?f=new Uint8Array(l.slice(0)):l instanceof Nn?f=l:f=a.encode(`${l}`);let m=ArrayBuffer.isView(f)?f.byteLength:f.size;m&&(this.#r+=m,this.#e.push(f))}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,o="";for await(let a of jn(this.#e,!1))o+=r.decode(a,{stream:!0});return o+=r.decode(),o}async arrayBuffer(){let r=new Uint8Array(this.size),o=0;for await(let a of jn(this.#e,!1))r.set(a,o),o+=a.length;return r.buffer}stream(){let r=jn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let a=await r.next();a.done?o.close():o.enqueue(a.value)},async cancel(){await r.return()}})}slice(r=0,o=this.size,a=""){let{size:s}=this,l=r<0?Math.max(s+r,0):Math.min(r,s),f=o<0?Math.max(s+o,0):Math.min(o,s),m=Math.max(f-l,0),b=this.#e,p=[],R=0;for(let S of b){if(R>=m)break;let g=ArrayBuffer.isView(S)?S.byteLength:S.size;if(l&&g<=l)l-=g,f-=g;else{let y;ArrayBuffer.isView(S)?(y=S.subarray(l,Math.min(g,f)),R+=y.byteLength):(y=S.slice(l,Math.min(g,f)),R+=y.size),f-=g,p.push(y),l=0}}let T=new Nn([],{type:String(a).toLowerCase()});return T.#r=m,T.#e=p,T}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(hs.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});bf=hs,_e=bf});var yf,gf,ft,Un=kt(()=>{Dt();yf=class extends _e{#e=0;#t="";constructor(r,o,a={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,a);a===null&&(a={});let s=a.lastModified===void 0?Date.now():Number(a.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof _e&&/^(File)$/.test(r[Symbol.toStringTag])}},gf=yf,ft=gf});function bs(n,r=_e){var o=`${ms()}${ms()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),a=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return n.forEach((l,f)=>typeof l=="string"?a.push(s+Hn(f)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):a.push(s+Hn(f)+`"; filename="${Hn(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),a.push(`--${o}--`),new r(a,{type:"multipart/form-data; boundary="+o})}var Ft,Sf,_f,ms,wf,ps,Hn,Me,je,qr=kt(()=>{Dt();Un();({toStringTag:Ft,iterator:Sf,hasInstance:_f}=Symbol),ms=Math.random,wf="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),ps=(n,r,o)=>(n+="",/^(Blob|File)$/.test(r&&r[Ft])?[(o=o!==void 0?o+"":r[Ft]=="File"?r.name:"blob",n),r.name!==o||r[Ft]=="blob"?new ft([r],o,r):r]:[n,r+""]),Hn=(n,r)=>(r?n:n.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Me=(n,r,o)=>{if(r.length<o)throw new TypeError(`Failed to execute '${n}' on 'FormData': ${o} arguments required, but only ${r.length} present.`)},je=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Ft](){return"FormData"}[Sf](){return this.entries()}static[_f](r){return r&&typeof r=="object"&&r[Ft]==="FormData"&&!wf.some(o=>typeof r[o]!="function")}append(...r){Me("append",arguments,2),this.#e.push(ps(...r))}delete(r){Me("delete",arguments,1),r+="",this.#e=this.#e.filter(([o])=>o!==r)}get(r){Me("get",arguments,1),r+="";for(var o=this.#e,a=o.length,s=0;s<a;s++)if(o[s][0]===r)return o[s][1];return null}getAll(r,o){return Me("getAll",arguments,1),o=[],r+="",this.#e.forEach(a=>a[0]===r&&o.push(a[1])),o}has(r){return Me("has",arguments,1),r+="",this.#e.some(o=>o[0]===r)}forEach(r,o){Me("forEach",arguments,1);for(var[a,s]of this)r.call(o,s,a,this)}set(...r){Me("set",arguments,2);var o=[],a=!0;r=ps(...r),this.#e.forEach(s=>{s[0]===r[0]?a&&(a=!o.push(r)):o.push(s)}),a&&o.push(r),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var _s=A(($d,Ss)=>{if(!globalThis.DOMException)try{let{MessageChannel:n}=require("worker_threads"),r=new n().port1,o=new ArrayBuffer;r.postMessage(o,[o,o])}catch(n){n.constructor.name==="DOMException"&&(globalThis.DOMException=n.constructor)}Ss.exports=globalThis.DOMException});var zt,ws,Rf,Vn,Yn=kt(()=>{zt=require("node:fs"),ws=ce(_s(),1);Un();Dt();({stat:Rf}=zt.promises),Vn=class{#e;#t;constructor(r){this.#e=r.path,this.#t=r.start,this.size=r.size,this.lastModified=r.lastModified,this.originalSize=r.originalSize===void 0?r.size:r.originalSize}slice(r,o){return new Vn({path:this.#e,lastModified:this.lastModified,originalSize:this.originalSize,size:o-r,start:this.#t+r})}async*stream(){let{mtimeMs:r,size:o}=await Rf(this.#e);if(r>this.lastModified||this.originalSize!==o)throw new ws.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,zt.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Es={};_i(Es,{toFormData:()=>Bf});function vf(n){let r=n.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let o=r[2]||r[3]||"",a=o.slice(o.lastIndexOf("\\")+1);return a=a.replace(/%22/g,'"'),a=a.replace(/&#(\d{4});/g,(s,l)=>String.fromCharCode(l)),a}async function Bf(n,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let o=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let a=new Ts(o[1]||o[2]),s,l,f,m,b,p,R=[],T=new je,S=v=>{f+=P.decode(v,{stream:!0})},g=v=>{R.push(v)},y=()=>{let v=new ft(R,p,{type:b});T.append(m,v)},C=()=>{T.append(m,f)},P=new TextDecoder("utf-8");P.decode(),a.onPartBegin=function(){a.onPartData=S,a.onPartEnd=C,s="",l="",f="",m="",b="",p=null,R.length=0},a.onHeaderField=function(v){s+=P.decode(v,{stream:!0})},a.onHeaderValue=function(v){l+=P.decode(v,{stream:!0})},a.onHeaderEnd=function(){if(l+=P.decode(),s=s.toLowerCase(),s==="content-disposition"){let v=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);v&&(m=v[2]||v[3]||""),p=vf(l),p&&(a.onPartData=g,a.onPartEnd=y)}else s==="content-type"&&(b=l);l="",s=""};for await(let v of n)a.write(v);return a.end(),T}var de,F,Rs,Oe,Dr,Fr,Tf,$t,Ef,Cf,Pf,Af,Ne,Ts,Cs=kt(()=>{Yn();qr();de=0,F={START_BOUNDARY:de++,HEADER_FIELD_START:de++,HEADER_FIELD:de++,HEADER_VALUE_START:de++,HEADER_VALUE:de++,HEADER_VALUE_ALMOST_DONE:de++,HEADERS_ALMOST_DONE:de++,PART_DATA_START:de++,PART_DATA:de++,END:de++},Rs=1,Oe={PART_BOUNDARY:Rs,LAST_BOUNDARY:Rs*=2},Dr=10,Fr=13,Tf=32,$t=45,Ef=58,Cf=97,Pf=122,Af=n=>n|32,Ne=()=>{},Ts=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=Ne,this.onHeaderField=Ne,this.onHeadersEnd=Ne,this.onHeaderValue=Ne,this.onPartBegin=Ne,this.onPartData=Ne,this.onPartEnd=Ne,this.boundaryChars={},r=`\r
--`+r;let o=new Uint8Array(r.length);for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a),this.boundaryChars[o[a]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=F.START_BOUNDARY}write(r){let o=0,a=r.length,s=this.index,{lookbehind:l,boundary:f,boundaryChars:m,index:b,state:p,flags:R}=this,T=this.boundary.length,S=T-1,g=r.length,y,C,P=k=>{this[k+"Mark"]=o},v=k=>{delete this[k+"Mark"]},W=(k,z,I,ne)=>{(z===void 0||z!==I)&&this[k](ne&&ne.subarray(z,I))},U=(k,z)=>{let I=k+"Mark";I in this&&(z?(W(k,this[I],o,r),delete this[I]):(W(k,this[I],r.length,r),this[I]=0))};for(o=0;o<a;o++)switch(y=r[o],p){case F.START_BOUNDARY:if(b===f.length-2){if(y===$t)R|=Oe.LAST_BOUNDARY;else if(y!==Fr)return;b++;break}else if(b-1===f.length-2){if(R&Oe.LAST_BOUNDARY&&y===$t)p=F.END,R=0;else if(!(R&Oe.LAST_BOUNDARY)&&y===Dr)b=0,W("onPartBegin"),p=F.HEADER_FIELD_START;else return;break}y!==f[b+2]&&(b=-2),y===f[b+2]&&b++;break;case F.HEADER_FIELD_START:p=F.HEADER_FIELD,P("onHeaderField"),b=0;case F.HEADER_FIELD:if(y===Fr){v("onHeaderField"),p=F.HEADERS_ALMOST_DONE;break}if(b++,y===$t)break;if(y===Ef){if(b===1)return;U("onHeaderField",!0),p=F.HEADER_VALUE_START;break}if(C=Af(y),C<Cf||C>Pf)return;break;case F.HEADER_VALUE_START:if(y===Tf)break;P("onHeaderValue"),p=F.HEADER_VALUE;case F.HEADER_VALUE:y===Fr&&(U("onHeaderValue",!0),W("onHeaderEnd"),p=F.HEADER_VALUE_ALMOST_DONE);break;case F.HEADER_VALUE_ALMOST_DONE:if(y!==Dr)return;p=F.HEADER_FIELD_START;break;case F.HEADERS_ALMOST_DONE:if(y!==Dr)return;W("onHeadersEnd"),p=F.PART_DATA_START;break;case F.PART_DATA_START:p=F.PART_DATA,P("onPartData");case F.PART_DATA:if(s=b,b===0){for(o+=S;o<g&&!(r[o]in m);)o+=T;o-=S,y=r[o]}if(b<f.length)f[b]===y?(b===0&&U("onPartData",!0),b++):b=0;else if(b===f.length)b++,y===Fr?R|=Oe.PART_BOUNDARY:y===$t?R|=Oe.LAST_BOUNDARY:b=0;else if(b-1===f.length)if(R&Oe.PART_BOUNDARY){if(b=0,y===Dr){R&=~Oe.PART_BOUNDARY,W("onPartEnd"),W("onPartBegin"),p=F.HEADER_FIELD_START;break}}else R&Oe.LAST_BOUNDARY&&y===$t?(W("onPartEnd"),p=F.END,R=0):b=0;if(b>0)l[b-1]=y;else if(s>0){let k=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);W("onPartData",0,s,k),s=0,P("onPartData"),o--}break;case F.END:break;default:throw new Error(`Unexpected state entered: ${p}`)}U("onHeaderField"),U("onHeaderValue"),U("onPartData"),this.index=b,this.state=p,this.flags=R}end(){if(this.state===F.HEADER_FIELD_START&&this.index===0||this.state===F.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==F.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var zf={};_i(zf,{default:()=>Lf});var he=require("@raycast/api");var is=ce(require("node:process"),1),as=ce(os(),1);async function ss(n){if(is.default.platform!=="darwin")throw new Error("macOS only");let{stdout:r}=await(0,as.default)("osascript",["-e",n]);return r}var $s=ce(require("node:http"),1),Ms=ce(require("node:https"),1),Ue=ce(require("node:zlib"),1),ee=ce(require("node:stream"),1),jt=require("node:buffer");function pf(n){if(!/^data:/i.test(n))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');n=n.replace(/\r?\n/g,"");let r=n.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let o=n.substring(5,r).split(";"),a="",s=!1,l=o[0]||"text/plain",f=l;for(let R=1;R<o.length;R++)o[R]==="base64"?s=!0:(f+=`;${o[R]}`,o[R].indexOf("charset=")===0&&(a=o[R].substring(8)));!o[0]&&!a.length&&(f+=";charset=US-ASCII",a="US-ASCII");let m=s?"base64":"ascii",b=unescape(n.substring(r+1)),p=Buffer.from(b,m);return p.type=l,p.typeFull=f,p.charset=a,p}var us=pf;var re=ce(require("node:stream"),1),Re=require("node:util"),J=require("node:buffer");Dt();qr();var ke=class extends Error{constructor(r,o){super(r);Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var Z=class extends ke{constructor(r,o,a){super(r,o);a&&(this.code=this.errno=a.code,this.erroredSysCall=a.syscall)}};var Wr=Symbol.toStringTag,Gn=n=>typeof n=="object"&&typeof n.append=="function"&&typeof n.delete=="function"&&typeof n.get=="function"&&typeof n.getAll=="function"&&typeof n.has=="function"&&typeof n.set=="function"&&typeof n.sort=="function"&&n[Wr]==="URLSearchParams",Lt=n=>n&&typeof n=="object"&&typeof n.arrayBuffer=="function"&&typeof n.type=="string"&&typeof n.stream=="function"&&typeof n.constructor=="function"&&/^(Blob|File)$/.test(n[Wr]),ys=n=>typeof n=="object"&&(n[Wr]==="AbortSignal"||n[Wr]==="EventTarget"),gs=(n,r)=>{let o=new URL(r).hostname,a=new URL(n).hostname;return o===a||o.endsWith(`.${a}`)};var kf=(0,Re.promisify)(re.default.pipeline),Q=Symbol("Body internals"),we=class{constructor(r,{size:o=0}={}){let a=null;r===null?r=null:Gn(r)?r=J.Buffer.from(r.toString()):Lt(r)||J.Buffer.isBuffer(r)||(Re.types.isAnyArrayBuffer(r)?r=J.Buffer.from(r):ArrayBuffer.isView(r)?r=J.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof re.default||(r instanceof je?(r=bs(r),a=r.type.split("=")[1]):r=J.Buffer.from(String(r))));let s=r;J.Buffer.isBuffer(r)?s=re.default.Readable.from(r):Lt(r)&&(s=re.default.Readable.from(r.stream())),this[Q]={body:r,stream:s,boundary:a,disturbed:!1,error:null},this.size=o,r instanceof re.default&&r.on("error",l=>{let f=l instanceof ke?l:new Z(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[Q].error=f})}get body(){return this[Q].stream}get bodyUsed(){return this[Q].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:o,byteLength:a}=await Qn(this);return r.slice(o,o+a)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let a=new je,s=new URLSearchParams(await this.text());for(let[l,f]of s)a.append(l,f);return a}let{toFormData:o}=await Promise.resolve().then(()=>(Cs(),Es));return o(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[Q].body&&this[Q].body.type||"",o=await this.arrayBuffer();return new _e([o],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await Qn(this);return new TextDecoder().decode(r)}buffer(){return Qn(this)}};we.prototype.buffer=(0,Re.deprecate)(we.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(we.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Re.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Qn(n){if(n[Q].disturbed)throw new TypeError(`body used already for: ${n.url}`);if(n[Q].disturbed=!0,n[Q].error)throw n[Q].error;let{body:r}=n;if(r===null)return J.Buffer.alloc(0);if(!(r instanceof re.default))return J.Buffer.alloc(0);let o=[],a=0;try{for await(let s of r){if(n.size>0&&a+s.length>n.size){let l=new Z(`content size at ${n.url} over limit: ${n.size}`,"max-size");throw r.destroy(l),l}a+=s.length,o.push(s)}}catch(s){throw s instanceof ke?s:new Z(`Invalid response body while trying to fetch ${n.url}: ${s.message}`,"system",s)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?J.Buffer.from(o.join("")):J.Buffer.concat(o,a)}catch(s){throw new Z(`Could not create Buffer from response body for ${n.url}: ${s.message}`,"system",s)}else throw new Z(`Premature close of server response while trying to fetch ${n.url}`)}var dt=(n,r)=>{let o,a,{body:s}=n[Q];if(n.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof re.default&&typeof s.getBoundary!="function"&&(o=new re.PassThrough({highWaterMark:r}),a=new re.PassThrough({highWaterMark:r}),s.pipe(o),s.pipe(a),n[Q].stream=o,s=a),s},Of=(0,Re.deprecate)(n=>n.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Lr=(n,r)=>n===null?null:typeof n=="string"?"text/plain;charset=UTF-8":Gn(n)?"application/x-www-form-urlencoded;charset=UTF-8":Lt(n)?n.type||null:J.Buffer.isBuffer(n)||Re.types.isAnyArrayBuffer(n)||ArrayBuffer.isView(n)?null:n instanceof je?`multipart/form-data; boundary=${r[Q].boundary}`:n&&typeof n.getBoundary=="function"?`multipart/form-data;boundary=${Of(n)}`:n instanceof re.default?null:"text/plain;charset=UTF-8",Ps=n=>{let{body:r}=n[Q];return r===null?0:Lt(r)?r.size:J.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},As=async(n,{body:r})=>{r===null?n.end():await kf(r,n)};var Xn=require("node:util"),Mt=ce(require("node:http"),1),zr=typeof Mt.default.validateHeaderName=="function"?Mt.default.validateHeaderName:n=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(n)){let r=new TypeError(`Header name must be a valid HTTP token [${n}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},Kn=typeof Mt.default.validateHeaderValue=="function"?Mt.default.validateHeaderValue:(n,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let o=new TypeError(`Invalid character in header content ["${n}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},G=class extends URLSearchParams{constructor(r){let o=[];if(r instanceof G){let a=r.raw();for(let[s,l]of Object.entries(a))o.push(...l.map(f=>[s,f]))}else if(r!=null)if(typeof r=="object"&&!Xn.types.isBoxedPrimitive(r)){let a=r[Symbol.iterator];if(a==null)o.push(...Object.entries(r));else{if(typeof a!="function")throw new TypeError("Header pairs must be iterable");o=[...r].map(s=>{if(typeof s!="object"||Xn.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");o=o.length>0?o.map(([a,s])=>(zr(a),Kn(a,String(s)),[String(a).toLowerCase(),String(s)])):void 0;super(o);return new Proxy(this,{get(a,s,l){switch(s){case"append":case"set":return(f,m)=>(zr(f),Kn(f,String(m)),URLSearchParams.prototype[s].call(a,String(f).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return f=>(zr(f),URLSearchParams.prototype[s].call(a,String(f).toLowerCase()));case"keys":return()=>(a.sort(),new Set(URLSearchParams.prototype.keys.call(a)).keys());default:return Reflect.get(a,s,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let o=this.getAll(r);if(o.length===0)return null;let a=o.join(", ");return/^content-encoding$/i.test(r)&&(a=a.toLowerCase()),a}forEach(r,o=void 0){for(let a of this.keys())Reflect.apply(r,o,[this.get(a),a,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,o)=>(r[o]=this.getAll(o),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,o)=>{let a=this.getAll(o);return o==="host"?r[o]=a[0]:r[o]=a.length>1?a:a[0],r},{})}};Object.defineProperties(G.prototype,["get","entries","forEach","values"].reduce((n,r)=>(n[r]={enumerable:!0},n),{}));function vs(n=[]){return new G(n.reduce((r,o,a,s)=>(a%2===0&&r.push(s.slice(a,a+2)),r),[]).filter(([r,o])=>{try{return zr(r),Kn(r,String(o)),!0}catch{return!1}}))}var If=new Set([301,302,303,307,308]),$r=n=>If.has(n);var ue=Symbol("Response internals"),V=class extends we{constructor(r=null,o={}){super(r,o);let a=o.status!=null?o.status:200,s=new G(o.headers);if(r!==null&&!s.has("Content-Type")){let l=Lr(r,this);l&&s.append("Content-Type",l)}this[ue]={type:"default",url:o.url,status:a,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[ue].type}get url(){return this[ue].url||""}get status(){return this[ue].status}get ok(){return this[ue].status>=200&&this[ue].status<300}get redirected(){return this[ue].counter>0}get statusText(){return this[ue].statusText}get headers(){return this[ue].headers}get highWaterMark(){return this[ue].highWaterMark}clone(){return new V(dt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,o=302){if(!$r(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new V(null,{headers:{location:new URL(r).toString()},status:o})}static error(){let r=new V(null,{status:0,statusText:""});return r[ue].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(V.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Fs=require("node:url"),Ls=require("node:util");var Bs=n=>{if(n.search)return n.search;let r=n.href.length-1,o=n.hash||(n.href[r]==="#"?"#":"");return n.href[r-o.length]==="?"?"?":""};var Os=require("node:net");function ks(n,r=!1){return n==null||(n=new URL(n),/^(about|blob|data):$/.test(n.protocol))?"no-referrer":(n.username="",n.password="",n.hash="",r&&(n.pathname="",n.search=""),n)}var Is=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),xs="strict-origin-when-cross-origin";function qs(n){if(!Is.has(n))throw new TypeError(`Invalid referrerPolicy: ${n}`);return n}function xf(n){if(/^(http|ws)s:$/.test(n.protocol))return!0;let r=n.host.replace(/(^\[)|(]$)/g,""),o=(0,Os.isIP)(r);return o===4&&/^127\./.test(r)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:/^(.+\.)*localhost$/.test(n.host)?!1:n.protocol==="file:"}function ht(n){return/^about:(blank|srcdoc)$/.test(n)||n.protocol==="data:"||/^(blob|filesystem):$/.test(n.protocol)?!0:xf(n)}function Ws(n,{referrerURLCallback:r,referrerOriginCallback:o}={}){if(n.referrer==="no-referrer"||n.referrerPolicy==="")return null;let a=n.referrerPolicy;if(n.referrer==="about:client")return"no-referrer";let s=n.referrer,l=ks(s),f=ks(s,!0);l.toString().length>4096&&(l=f),r&&(l=r(l)),o&&(f=o(f));let m=new URL(n.url);switch(a){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return l;case"strict-origin":return ht(l)&&!ht(m)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return l.origin===m.origin?l:ht(l)&&!ht(m)?"no-referrer":f;case"same-origin":return l.origin===m.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===m.origin?l:f;case"no-referrer-when-downgrade":return ht(l)&&!ht(m)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${a}`)}}function Ds(n){let r=(n.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let a of r)a&&Is.has(a)&&(o=a);return o}var N=Symbol("Request internals"),Mr=n=>typeof n=="object"&&typeof n[N]=="object",qf=(0,Ls.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Ie=class extends we{constructor(r,o={}){let a;if(Mr(r)?a=new URL(r.url):(a=new URL(r),r={}),a.username!==""||a.password!=="")throw new TypeError(`${a} is an url with embedded credentials.`);let s=o.method||r.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),"data"in o&&qf(),(o.body!=null||Mr(r)&&r.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:Mr(r)&&r.body!==null?dt(r):null;super(l,{size:o.size||r.size||0});let f=new G(o.headers||r.headers||{});if(l!==null&&!f.has("Content-Type")){let p=Lr(l,this);p&&f.set("Content-Type",p)}let m=Mr(r)?r.signal:null;if("signal"in o&&(m=o.signal),m!=null&&!ys(m))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let b=o.referrer==null?r.referrer:o.referrer;if(b==="")b="no-referrer";else if(b){let p=new URL(b);b=/^about:(\/\/)?client$/.test(p)?"client":p}else b=void 0;this[N]={method:s,redirect:o.redirect||r.redirect||"follow",headers:f,parsedURL:a,signal:m,referrer:b},this.follow=o.follow===void 0?r.follow===void 0?20:r.follow:o.follow,this.compress=o.compress===void 0?r.compress===void 0?!0:r.compress:o.compress,this.counter=o.counter||r.counter||0,this.agent=o.agent||r.agent,this.highWaterMark=o.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||r.referrerPolicy||""}get method(){return this[N].method}get url(){return(0,Fs.format)(this[N].parsedURL)}get headers(){return this[N].headers}get redirect(){return this[N].redirect}get signal(){return this[N].signal}get referrer(){if(this[N].referrer==="no-referrer")return"";if(this[N].referrer==="client")return"about:client";if(this[N].referrer)return this[N].referrer.toString()}get referrerPolicy(){return this[N].referrerPolicy}set referrerPolicy(r){this[N].referrerPolicy=qs(r)}clone(){return new Ie(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Ie.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var zs=n=>{let{parsedURL:r}=n[N],o=new G(n[N].headers);o.has("Accept")||o.set("Accept","*/*");let a=null;if(n.body===null&&/^(post|put)$/i.test(n.method)&&(a="0"),n.body!==null){let m=Ps(n);typeof m=="number"&&!Number.isNaN(m)&&(a=String(m))}a&&o.set("Content-Length",a),n.referrerPolicy===""&&(n.referrerPolicy=xs),n.referrer&&n.referrer!=="no-referrer"?n[N].referrer=Ws(n):n[N].referrer="no-referrer",n[N].referrer instanceof URL&&o.set("Referer",n.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),n.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:s}=n;typeof s=="function"&&(s=s(r)),!o.has("Connection")&&!s&&o.set("Connection","close");let l=Bs(r),f={path:r.pathname+l,method:n.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:n.insecureHTTPParser,agent:s};return{parsedURL:r,options:f}};var Zn=class extends ke{constructor(r,o="aborted"){super(r,o)}};qr();Yn();var Wf=new Set(["data:","http:","https:"]);async function jr(n,r){return new Promise((o,a)=>{let s=new Ie(n,r),{parsedURL:l,options:f}=zs(s);if(!Wf.has(l.protocol))throw new TypeError(`node-fetch cannot load ${n}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let y=us(s.url),C=new V(y,{headers:{"Content-Type":y.typeFull}});o(C);return}let m=(l.protocol==="https:"?Ms.default:$s.default).request,{signal:b}=s,p=null,R=()=>{let y=new Zn("The operation was aborted.");a(y),s.body&&s.body instanceof ee.default.Readable&&s.body.destroy(y),!(!p||!p.body)&&p.body.emit("error",y)};if(b&&b.aborted){R();return}let T=()=>{R(),g()},S=m(l.toString(),f);b&&b.addEventListener("abort",T);let g=()=>{S.abort(),b&&b.removeEventListener("abort",T)};S.on("error",y=>{a(new Z(`request to ${s.url} failed, reason: ${y.message}`,"system",y)),g()}),Df(S,y=>{p.body.destroy(y)}),process.version<"v14"&&S.on("socket",y=>{let C;y.prependListener("end",()=>{C=y._eventsCount}),y.prependListener("close",P=>{if(p&&C<y._eventsCount&&!P){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",p.body.emit("error",v)}})}),S.on("response",y=>{S.setTimeout(0);let C=vs(y.rawHeaders);if($r(y.statusCode)){let k=C.get("Location"),z=null;try{z=k===null?null:new URL(k,s.url)}catch{if(s.redirect!=="manual"){a(new Z(`uri requested responds with an invalid redirect URL: ${k}`,"invalid-redirect")),g();return}}switch(s.redirect){case"error":a(new Z(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),g();return;case"manual":break;case"follow":{if(z===null)break;if(s.counter>=s.follow){a(new Z(`maximum redirect reached at: ${s.url}`,"max-redirect")),g();return}let I={headers:new G(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:dt(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!gs(s.url,z))for(let X of["authorization","www-authenticate","cookie","cookie2"])I.headers.delete(X);if(y.statusCode!==303&&s.body&&r.body instanceof ee.default.Readable){a(new Z("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&s.method==="POST")&&(I.method="GET",I.body=void 0,I.headers.delete("content-length"));let ne=Ds(C);ne&&(I.referrerPolicy=ne),o(jr(new Ie(z,I))),g();return}default:return a(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}b&&y.once("end",()=>{b.removeEventListener("abort",T)});let P=(0,ee.pipeline)(y,new ee.PassThrough,k=>{k&&a(k)});process.version<"v12.10"&&y.on("aborted",T);let v={url:s.url,status:y.statusCode,statusText:y.statusMessage,headers:C,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},W=C.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||W===null||y.statusCode===204||y.statusCode===304){p=new V(P,v),o(p);return}let U={flush:Ue.default.Z_SYNC_FLUSH,finishFlush:Ue.default.Z_SYNC_FLUSH};if(W==="gzip"||W==="x-gzip"){P=(0,ee.pipeline)(P,Ue.default.createGunzip(U),k=>{k&&a(k)}),p=new V(P,v),o(p);return}if(W==="deflate"||W==="x-deflate"){let k=(0,ee.pipeline)(y,new ee.PassThrough,z=>{z&&a(z)});k.once("data",z=>{(z[0]&15)===8?P=(0,ee.pipeline)(P,Ue.default.createInflate(),I=>{I&&a(I)}):P=(0,ee.pipeline)(P,Ue.default.createInflateRaw(),I=>{I&&a(I)}),p=new V(P,v),o(p)}),k.once("end",()=>{p||(p=new V(P,v),o(p))});return}if(W==="br"){P=(0,ee.pipeline)(P,Ue.default.createBrotliDecompress(),k=>{k&&a(k)}),p=new V(P,v),o(p);return}p=new V(P,v),o(p)}),As(S,s).catch(a)})}function Df(n,r){let o=jt.Buffer.from(`0\r
\r
`),a=!1,s=!1,l;n.on("response",f=>{let{headers:m}=f;a=m["transfer-encoding"]==="chunked"&&!m["content-length"]}),n.on("socket",f=>{let m=()=>{if(a&&!s){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",r(p)}},b=p=>{s=jt.Buffer.compare(p.slice(-5),o)===0,!s&&l&&(s=jt.Buffer.compare(l.slice(-3),o.slice(0,3))===0&&jt.Buffer.compare(p.slice(-2),o.slice(3))===0),l=p};f.prependListener("close",m),f.on("data",b),n.on("close",()=>{f.removeListener("close",m),f.removeListener("data",b)})})}function Ff(n){return n instanceof Error?n.message:String(n)}async function Jn({message:n}){await(0,he.showToast)(he.ToastStyle.Failure,"Error",n.toString())}async function Lf(){try{let{accessToken:n}=(0,he.getPreferenceValues)(),r=await ss("the clipboard");if(r.length===0)return await Jn(new Error("Clipboard is empty"));new URL(r);let o=await jr("https://api-ssl.bitly.com/v4/shorten",{headers:new G({Authorization:`Bearer ${n}`,"Content-Type":"application/json"}),method:"post",body:JSON.stringify({long_url:r})}),{errors:a,link:s}=await o.json();if(a)return await Jn(new Error("Invalid URL String"));await(0,he.copyTextToClipboard)(s),await(0,he.showToast)(he.ToastStyle.Success,"Success","Copied shortened URL to clipboard")}catch(n){await Jn({message:Ff(n)})}}module.exports=_l(zf);0&&(module.exports={});
/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
